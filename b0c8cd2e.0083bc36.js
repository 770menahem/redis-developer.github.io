(window.webpackJsonp=window.webpackJsonp||[]).push([[221],{292:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return u}));var i=n(3),r=n(7),a=(n(0),n(393)),o=(n(394),["components"]),l={id:"index-understanding-sentinels",title:"3.3 Understanding Sentinels",sidebar_label:"3.3 Understanding Sentinels",slug:"/operate/redis-at-scale/high-availability/understanding-sentinels",isEditable:!1},s={unversionedId:"operate/redis-at-scale/high-availability/understanding-sentinels/index-understanding-sentinels",id:"operate/redis-at-scale/high-availability/understanding-sentinels/index-understanding-sentinels",isDocsHomePage:!1,title:"3.3 Understanding Sentinels",description:"In the beginning of this unit, we learned that we can\u2019t have high availability without replication and automatic failover. We covered replication in the previous two chapters, and now we\u2019ll explain Sentinel - a tool that provides the automatic failover.",source:"@site/docs/operate/redis-at-scale/high-availability/understanding-sentinels/index-understanding-sentinels.mdx",slug:"/operate/redis-at-scale/high-availability/understanding-sentinels",permalink:"/operate/redis-at-scale/high-availability/understanding-sentinels",editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/operate/redis-at-scale/high-availability/understanding-sentinels/index-understanding-sentinels.mdx",version:"current",lastUpdatedAt:1652821384,sidebar_label:"3.3 Understanding Sentinels",sidebar:"docs",previous:{title:"3.2 Exercise - Enabling Basic Replication",permalink:"/operate/redis-at-scale/high-availability/exercise-1"},next:{title:"3.4 Exercise - Sentinel Hands-on",permalink:"/operate/redis-at-scale/high-availability/exercise-2"}},c=[{value:"Deciding that a primary instance is down",id:"deciding-that-a-primary-instance-is-down",children:[]},{value:"Triggering a failover",id:"triggering-a-failover",children:[]},{value:"Sentinel and Client Libraries",id:"sentinel-and-client-libraries",children:[]},{value:"Further Reading",id:"further-reading",children:[]}],d={toc:c};function u(e){var t=e.components,n=Object(r.a)(e,o);return Object(a.b)("wrapper",Object(i.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"In the beginning of this unit, we learned that we can\u2019t have high availability without replication and automatic failover. We covered replication in the previous two chapters, and now we\u2019ll explain Sentinel - a tool that provides the automatic failover."),Object(a.b)("p",null,"Redis Sentinel is a distributed system consisting of multiple Redis instances started in sentinel mode. We call these instances ",Object(a.b)("strong",null,"Sentinels"),"."),Object(a.b)("p",null,"The group of Sentinels monitors a primary Redis instance and its replicas. If the sentinels detect that the primary instance has failed, the sentinel processes will look for the replica that has the latest data and will promote that replica to be the new primary. This way, the clients talking to the database will be able to reconnect to the new primary and continue functioning as usual, with minimal disruption to the users."),Object(a.b)("br",null),Object(a.b)("img",{height:"75%",width:"75%",src:"https://s3.us-east-2.amazonaws.com/assets-university.redislabs.com/ru301/3.4/image1.png",alt:"Sentinel Quorum Diagram"}),Object(a.b)("br",null),Object(a.b)("h2",{id:"deciding-that-a-primary-instance-is-down"},"Deciding that a primary instance is down"),Object(a.b)("p",null,"In order for the Sentinels to be able to decide that a primary instance is down we need to have enough Sentinels agree that the server is unreachable from their point of view."),Object(a.b)("p",null,"Having a number of Sentinels agreeing that they need to take an action is called ",Object(a.b)("strong",null,"reaching a quorum"),". If the Sentinels can\u2019t reach quorum, they cannot decide that the primary has failed. The exact number of Sentinels needed for quorum is configurable."),Object(a.b)("h2",{id:"triggering-a-failover"},"Triggering a failover"),Object(a.b)("p",null,"Once the Sentinels have decided that a primary instance is down, they need to elect and authorize a leader (a Sentinel instance) that will do the failover. A leader can only be chosen if the majority of the Sentinels agree on it."),Object(a.b)("p",null,"In the final step, the leader will reconfigure the chosen replica to become a primary by sending the command ",Object(a.b)("inlineCode",{parentName:"p"},"REPLICAOF NO ONE")," and it will reconfigure the other replicas to follow the newly promoted primary."),Object(a.b)("h2",{id:"sentinel-and-client-libraries"},"Sentinel and Client Libraries"),Object(a.b)("p",null,"If you have a system that uses Sentinel for high availability, then you need to have a client that supports Sentinel. Not all libraries have this feature, but most of the popular ones do, so make sure you add it to your list of requirements when choosing your library."),Object(a.b)("h2",{id:"further-reading"},"Further Reading"),Object(a.b)("p",null,"For more information on Redis Sentinel, check out the ",Object(a.b)("a",{parentName:"p",href:"https://redis.io/topics/sentinel"},"documentation")," on redis.io."))}u.isMDXComponent=!0},393:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var i=n(0),r=n.n(i);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),d=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=d(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},p=r.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(n),p=i,b=u["".concat(o,".").concat(p)]||u[p]||h[p]||a;return n?r.a.createElement(b,l(l({ref:t},c),{},{components:n})):r.a.createElement(b,l({ref:t},c))}));function b(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},394:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n(20),r=n(401);function a(){var e=Object(i.default)().siteConfig,t=(e=void 0===e?{}:e).baseUrl,n=void 0===t?"/":t,a=e.url;return{withBaseUrl:function(e,t){return function(e,t,n,i){var a=void 0===i?{}:i,o=a.forcePrependBaseUrl,l=void 0!==o&&o,s=a.absolute,c=void 0!==s&&s;if(!n)return n;if(n.startsWith("#"))return n;if(Object(r.b)(n))return n;if(l)return t+n;var d=n.startsWith(t)?n:t+n.replace(/^\//,"");return c?e+d:d}(a,n,e,t)}}}function o(e,t){return void 0===t&&(t={}),(0,a().withBaseUrl)(e,t)}},401:function(e,t,n){"use strict";function i(e){return!0===/^(\w*:|\/\/)/.test(e)}function r(e){return void 0!==e&&!i(e)}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}))}}]);