"use strict";(self.webpackChunkredis_developer_hub=self.webpackChunkredis_developer_hub||[]).push([[6347],{85162:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(67294),s=r(86010);const a="tabItem_Ymn6";function i(e){let{children:t,hidden:r,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,s.Z)(a,i),hidden:r},t)}},65488:(e,t,r)=>{r.d(t,{Z:()=>m});var n=r(87462),s=r(67294),a=r(86010),i=r(72389),l=r(67392),o=r(7094),p=r(12466);const d="tabList__CuJ",u="tabItem_LNqP";function c(e){var t;const{lazy:r,block:i,defaultValue:c,values:m,groupId:h,className:k}=e,b=s.Children.map(e.children,(e=>{if((0,s.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),g=m??b.map((e=>{let{props:{value:t,label:r,attributes:n}}=e;return{value:t,label:r,attributes:n}})),v=(0,l.l)(g,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const f=null===c?c:c??(null==(t=b.find((e=>e.props.default)))?void 0:t.props.value)??b[0].props.value;if(null!==f&&!g.some((e=>e.value===f)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${f}" but none of its children has the corresponding value. Available values are: ${g.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:E}=(0,o.U)(),[N,S]=(0,s.useState)(f),w=[],{blockElementScrollPositionUntilNextRender:C}=(0,p.o5)();if(null!=h){const e=y[h];null!=e&&e!==N&&g.some((t=>t.value===e))&&S(e)}const R=e=>{const t=e.currentTarget,r=w.indexOf(t),n=g[r].value;n!==N&&(C(t),S(n),null!=h&&E(h,String(n)))},A=e=>{var t;let r=null;switch(e.key){case"Enter":R(e);break;case"ArrowRight":{const t=w.indexOf(e.currentTarget)+1;r=w[t]??w[0];break}case"ArrowLeft":{const t=w.indexOf(e.currentTarget)-1;r=w[t]??w[w.length-1];break}}null==(t=r)||t.focus()};return s.createElement("div",{className:(0,a.Z)("tabs-container",d)},s.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":i},k)},g.map((e=>{let{value:t,label:r,attributes:i}=e;return s.createElement("li",(0,n.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>w.push(e),onKeyDown:A,onClick:R},i,{className:(0,a.Z)("tabs__item",u,null==i?void 0:i.className,{"tabs__item--active":N===t})}),r??t)}))),r?(0,s.cloneElement)(b.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):s.createElement("div",{className:"margin-top--md"},b.map(((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function m(e){const t=(0,i.Z)();return s.createElement(c,(0,n.Z)({key:String(t)},e))}},71131:(e,t,r)=>{r.d(t,{Z:()=>h});var n=r(67294),s=r(3905),a=r(52195);const i="riContainer_bco2",l="riDescriptionShort_E27B",o="riDetail_wzFs",p="riIcon_yDou",d="riTitle_x6vI",u="riDescription_RDnu",c="riMore_apRP";var m=r(86010);const h=e=>{const[t,r]=n.useState(!1);return n.createElement("a",{href:e.page,className:i},n.createElement("div",{className:l},n.createElement("div",{className:p},n.createElement("span",{className:"fe fe-zap"})),n.createElement("div",{className:o},n.createElement("div",{className:d},n.createElement("a",{href:e.page},e.title)),n.createElement("div",{className:u},e.description,n.Children.count(e.children)>0&&n.createElement("span",{className:(0,m.Z)(c,"fe","fe-more-horizontal"),onClick:()=>r(!t)})))),t&&n.createElement("div",{className:"ri-description-long"},n.createElement(s.Zo,{components:a.Z},e.children)))}},75345:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>p});var n=r(87462),s=(r(67294),r(3905));r(65488),r(85162),r(44996),r(71131);const a={id:"index-kubernetes-gke",title:"Create a Redis database on Google Kubernetes Engine",sidebar_label:"Redis on Kubernetes",slug:"/operate/orchestration/kubernetes/kubernetes-gke",authors:["ajeet"]},i=void 0,l={unversionedId:"operate/orchestration/kubernetes-gke/index-kubernetes-gke",id:"operate/orchestration/kubernetes-gke/index-kubernetes-gke",title:"Create a Redis database on Google Kubernetes Engine",description:"Step 1. Prerequisites",source:"@site/docs/operate/orchestration/kubernetes-gke/index-kubernetes-gke.mdx",sourceDirName:"operate/orchestration/kubernetes-gke",slug:"/operate/orchestration/kubernetes/kubernetes-gke",permalink:"/operate/orchestration/kubernetes/kubernetes-gke",draft:!1,editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/operate/orchestration/kubernetes-gke/index-kubernetes-gke.mdx",tags:[],version:"current",lastUpdatedAt:1655488379,formattedLastUpdatedAt:"Jun 17, 2022",frontMatter:{id:"index-kubernetes-gke",title:"Create a Redis database on Google Kubernetes Engine",sidebar_label:"Redis on Kubernetes",slug:"/operate/orchestration/kubernetes/kubernetes-gke",authors:["ajeet"]},sidebar:"docs",previous:{title:"Node.js, Nginx, Redis and Docker",permalink:"/operate/docker/nodejs-nginx-redis"},next:{title:"Kubernetes Operator: What It Is and Why You Should Really Care About It",permalink:"/operate/orchestration/kubernetes-operator"}},o={},p=[{value:"Step 1. Prerequisites",id:"step-1-prerequisites",level:3},{value:"Step 2. Ensure that gcloud is installed on your local Linux system:",id:"step-2-ensure-that-gcloud-is-installed-on-your-local-linux-system",level:3},{value:"Step 3. Create a 5 Node GKE cluster:",id:"step-3-create-a-5-node-gke-cluster",level:3},{value:"Step 4. Create a new namespace",id:"step-4-create-a-new-namespace",level:3},{value:"Step 5. Switch context to the newly created namespace",id:"step-5-switch-context-to-the-newly-created-namespace",level:3},{value:"Step 6. Deploy the operator bundle",id:"step-6-deploy-the-operator-bundle",level:3},{value:"Step 7. Verifying the Deployment:",id:"step-7-verifying-the-deployment",level:3},{value:"Step 8. Create a Redis Enterprise Cluster",id:"step-8-create-a-redis-enterprise-cluster",level:3},{value:"Step 9. Verifying the Redis Enterprise Cluster",id:"step-9-verifying-the-redis-enterprise-cluster",level:3},{value:"Step 10. Listing Kubernetes Resources",id:"step-10-listing-kubernetes-resources",level:3},{value:"Step 11. Listing the Secrets",id:"step-11-listing-the-secrets",level:3},{value:"Step 12. Listing the Password",id:"step-12-listing-the-password",level:3},{value:"Step 13. Creating a Database",id:"step-13-creating-a-database",level:3},{value:"Next Steps",id:"next-steps",level:2}],d={toc:p};function u(e){let{components:t,...a}=e;return(0,s.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h3",{id:"step-1-prerequisites"},"Step 1. Prerequisites"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"A Linux system"),(0,s.kt)("li",{parentName:"ul"},"curl, git, kubectl packages installed"),(0,s.kt)("li",{parentName:"ul"},"A Google Cloud account with Kubernetes Engine Admin role."),(0,s.kt)("li",{parentName:"ul"},"Install the latest cloud SDK from ",(0,s.kt)("a",{parentName:"li",href:"https://cloud.google.com/sdk/docs/quickstart#installing_the_latest_version"},"Installing the latest Cloud SDK version (313.0.1)")),(0,s.kt)("li",{parentName:"ul"},"Initializing the cloud SDK with ",(0,s.kt)("a",{parentName:"li",href:"https://cloud.google.com/sdk/docs/quickstart#initializing_the"},"gcloud init")," link")),(0,s.kt)("h3",{id:"step-2-ensure-that-gcloud-is-installed-on-your-local-linux-system"},"Step 2. Ensure that gcloud is installed on your local Linux system:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"$ gcloud -v\nGoogle Cloud SDK 320.0.0\nalpha 2020.12.04\napp-engine-go 1.9.71\napp-engine-java 1.9.84\napp-engine-python 1.9.91\napp-engine-python-extras 1.9.91\n")),(0,s.kt)("h3",{id:"step-3-create-a-5-node-gke-cluster"},"Step 3. Create a 5 Node GKE cluster:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"$ gcloud container clusters create testredis  --subnetwork default --num-nodes 5 --machine-type e2-standard-8 --enable-basic-auth --region us-east1\n")),(0,s.kt)("h3",{id:"step-4-create-a-new-namespace"},"Step 4. Create a new namespace"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"[node1 kubelabs]$ kubectl create namespace demo\nnamespace/demo created\n")),(0,s.kt)("h3",{id:"step-5-switch-context-to-the-newly-created-namespace"},"Step 5. Switch context to the newly created namespace"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'$ kubectl config set-context --current --namespace=demo\nContext "kubernetes-admin@kubernetes" modified.\n')),(0,s.kt)("h3",{id:"step-6-deploy-the-operator-bundle"},"Step 6. Deploy the operator bundle"),(0,s.kt)("p",null,"To deploy the default installation with kubectl, the following command will deploy a bundle of all the YAML declarations required for the operator. You can download the bundle YAML file via ",(0,s.kt)("a",{parentName:"p",href:"https://raw.githubusercontent.com/RedisLabs/redis-enterprise-k8s-docs/master/bundle.yaml"},"this")," link:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"$ kubectl apply -f bundle.yaml\nrole.rbac.authorization.k8s.io/redis-enterprise-operator created\nrolebinding.rbac.authorization.k8s.io/redis-enterprise-operator created\nserviceaccount/redis-enterprise-operator created\ncustomresourcedefinition.apiextensions.k8s.io/redisenterpriseclusters.app.redislabs.com created\ndeployment.apps/redis-enterprise-operator created\ncustomresourcedefinition.apiextensions.k8s.io/redisenterprisedatabases.app.redislabs.com created\n")),(0,s.kt)("h3",{id:"step-7-verifying-the-deployment"},"Step 7. Verifying the Deployment:"),(0,s.kt)("p",null,"Run the following command to verify redis-enterprise-operator deployment is running."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"kubectl get deployment\nNAME                               READY   UP-TO-DATE   AVAILABLE   AGE\nredis-enterprise-operator          1/1     1            1           9m34s\n")),(0,s.kt)("h3",{id:"step-8-create-a-redis-enterprise-cluster"},"Step 8. Create a Redis Enterprise Cluster"),(0,s.kt)("p",null,"Create a Redis Enterprise Cluster (REC) using the default configuration, which is suitable for development type deployments and works in typical scenarios:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"$ kubectl apply -f crds/app_v1_redisenterprisecluster_cr.yaml\n\nredisenterprisecluster.app.redislabs.com/redis-enterprise created\n")),(0,s.kt)("h3",{id:"step-9-verifying-the-redis-enterprise-cluster"},"Step 9. Verifying the Redis Enterprise Cluster"),(0,s.kt)("p",null,(0,s.kt)("inlineCode",{parentName:"p"},"rec")," is a shortcut for RedisEnterpriseCluster. The cluster takes around 5-10 minutes to come up. Run the command below to check that the RedisEnterpriseCluster is up:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"$ kubectl get rec\nNAME               AGE\nredis-enterprise   14s\n[node1 redis-enterprise-k8s-docs]$\n")),(0,s.kt)("h3",{id:"step-10-listing-kubernetes-resources"},"Step 10. Listing Kubernetes Resources"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"$ kubectl get po,svc,deploy\nNAME                                                    READY   STATUS    RESTARTS   AGE\npod/redis-enterprise-0                                  2/2     Running   0          6m42s\npod/redis-enterprise-1                                  2/2     Running   0          4m34s\npod/redis-enterprise-2                                  2/2     Running   0          2m18s\npod/redis-enterprise-operator-58f8566fd7-5kcvz          1/1     Running   0          69m\npod/redis-enterprise-services-rigger-5849b86c65-lwql9   1/1     Running   0          6m42s\nNAME                          TYPE           CLUSTER-IP     EXTERNAL-IP     PORT(S)                      AGE\nservice/kubernetes            ClusterIP      10.3.240.1     <none>          443/TCP                      71m\nservice/redis-enterprise      ClusterIP      None           <none>          9443/TCP,8001/TCP,8070/TCP   6m42s\nservice/redis-enterprise-ui   LoadBalancer   10.3.246.252   35.196.117.24   8443:31473/TCP               6m42s\nNAME                                               READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/redis-enterprise-operator          1/1     1            1           69m\ndeployment.apps/redis-enterprise-services-rigger   1/1     1            1           6m44s\n")),(0,s.kt)("p",null,"You can verify the Pods and list of services using the Google Cloud Dashboard UI:"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"Redis Enterprise UI",src:r(24976).Z,width:"1332",height:"854"})),(0,s.kt)("h3",{id:"step-11-listing-the-secrets"},"Step 11. Listing the Secrets"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"kubectl get secrets redis-enterprise -o yaml | grep password | awk '{print $2}'\nbXVLeHRpblY=\n")),(0,s.kt)("h3",{id:"step-12-listing-the-password"},"Step 12. Listing the Password"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"echo bXVLeHRpblY= | base64 -d\n")),(0,s.kt)("h3",{id:"step-13-creating-a-database"},"Step 13. Creating a Database"),(0,s.kt)("p",null,"Open ",(0,s.kt)("inlineCode",{parentName:"p"},"https://localhost:8443"),' in the browser to see the Redis Enterprise Software web console. Click on "Setup", add your preferred DNS and admin credentials and proceed further to create your first Redis database using Redis Enterprise.'),(0,s.kt)("h2",{id:"next-steps"},"Next Steps"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://docs.redis.com/latest/kubernetes/architecture/"},"Redis Kubernetes Architecture")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://docs.redis.com/latest/kubernetes/architecture/operator/"},"Redis Enterprise Kubernetes Operator-based Architecture")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://docs.redis.com/latest/kubernetes/memory/sizing-on-kubernetes/"},"Sizing and Scaling a Redis Enterprise Cluster Deployment on Kubernetes"))),(0,s.kt)("h2",{id:""}),(0,s.kt)("div",null,(0,s.kt)("a",{href:"https://launchpad.redis.com",target:"_blank",rel:"noopener",className:"link"},(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},'<img\n  src="/img/launchpad.png"\n  className="thumb"\n  loading="lazy"\n  alt="Redis Launchpad"\n/>\n')))))}u.isMDXComponent=!0},24976:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/re_kubernetes-b0e5aa2c9a819bfb6d0bd9fa6898ab51.png"}}]);