"use strict";(self.webpackChunkredis_developer_hub=self.webpackChunkredis_developer_hub||[]).push([[5498],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>h});var s=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,s,r=function(e,t){if(null==e)return{};var a,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=s.createContext({}),d=function(e){var t=s.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):n(n({},t),e)),a},c=function(e){var t=d(e.components);return s.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},u=s.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=d(a),h=r,m=u["".concat(l,".").concat(h)]||u[h]||p[h]||i;return a?s.createElement(m,n(n({ref:t},c),{},{components:a})):s.createElement(m,n({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,n=new Array(i);n[0]=u;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,n[1]=o;for(var d=2;d<i;d++)n[d]=a[d];return s.createElement.apply(null,n)}return s.createElement.apply(null,a)}u.displayName="MDXCreateElement"},23612:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var s=a(87462),r=(a(67294),a(3905));const i={id:"index-market-basket-analysis",title:"How E-Commerce Websites Can Improve Market Basket Analysis with RedisAI and RedisGears",sidebar_label:"Market-Basket Analysis using RedisAI and RedisGears",slug:"/howtos/redisai/market-basket-analysis",authors:["ajeet","christian"]},n=void 0,o={unversionedId:"howtos/redisai/market-basket-analysis/index-market-basket-analysis",id:"howtos/redisai/market-basket-analysis/index-market-basket-analysis",title:"How E-Commerce Websites Can Improve Market Basket Analysis with RedisAI and RedisGears",description:"Market-Basket",source:"@site/docs/howtos/redisai/market-basket-analysis/index-market-basket-analysis.mdx",sourceDirName:"howtos/redisai/market-basket-analysis",slug:"/howtos/redisai/market-basket-analysis",permalink:"/howtos/redisai/market-basket-analysis",draft:!1,editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/howtos/redisai/market-basket-analysis/index-market-basket-analysis.mdx",tags:[],version:"current",lastUpdatedAt:1655485542,formattedLastUpdatedAt:"Jun 17, 2022",frontMatter:{id:"index-market-basket-analysis",title:"How E-Commerce Websites Can Improve Market Basket Analysis with RedisAI and RedisGears",sidebar_label:"Market-Basket Analysis using RedisAI and RedisGears",slug:"/howtos/redisai/market-basket-analysis",authors:["ajeet","christian"]},sidebar:"docs",previous:{title:"RedisAI Tutorial",permalink:"/howtos/redisai/getting-started"},next:{title:"How to build a Real-Time Leaderboard app Using Redis",permalink:"/howtos/leaderboard"}},l={},d=[{value:"What is Market Basket Analysis?",id:"what-is-market-basket-analysis",level:3},{value:"Prerequisites:",id:"prerequisites",level:3},{value:"Step 1. Clone the repository",id:"step-1-clone-the-repository",level:3},{value:"Step 2. Bring up the services",id:"step-2-bring-up-the-services",level:3},{value:"Redis service",id:"redis-service",level:4},{value:"Frontend service",id:"frontend-service",level:4},{value:"Step 3. List the service status",id:"step-3-list-the-service-status",level:3},{value:"Step 4. Access the app",id:"step-4-access-the-app",level:3},{value:"How does it work?",id:"how-does-it-work",level:3},{value:"Scoring",id:"scoring",level:3},{value:"Conclusion",id:"conclusion",level:3},{value:"Further References:",id:"further-references",level:3}],c={toc:d};function p(e){let{components:t,...i}=e;return(0,r.kt)("wrapper",(0,s.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Market-Basket",src:a(92029).Z,width:"1285",height:"1027"})),(0,r.kt)("p",null,"Whenever you shop online, there is a recommendation system (just like a digital salesman) that is busy guiding you toward the most likely product you might purchase. One good example is movie recommendations offered up when you are searching through the leading entertainment services such as Amazon Prime or Netflix. Modern multi-channel retailers are turning to real-time retail data analytics to understand their customer behavior so that they can properly plan and promote products, increase sales, and optimize supply chain performance."),(0,r.kt)("h3",{id:"what-is-market-basket-analysis"},"What is Market Basket Analysis?"),(0,r.kt)("p",null,"With the rapid growth of e-commerce data, more and more organizations are discovering ways of using ",(0,r.kt)("strong",{parentName:"p"},"Market Basket Analysis")," (MBA) to gain useful insights into associations and hidden relationships. A predictive version of market basket analysis is gaining popularity across many sectors in an effort to identify sequential purchases."),(0,r.kt)("p",null,"Market basket analysis is a technique based on buying a group item. The approach is based on the theory that customers who buy a certain item (or group of items) are more likely to buy another specific item (or group of items). It creates If-Then scenario rules; for example, if item A is purchased, then item B is likely to be purchased. The rules are probabilistic in nature or, in other words, they are derived from the frequencies of co-occurrence in the observations."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"            If {A} then likelihood of B is probably more accurate\n")),(0,r.kt)("p",null,"Say you are in a mobile retail shop to buy a mobile phone. Based on the analysis, are you more likely to buy a leather phone case or earphones in the same transaction than somebody who did not buy a phone?"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(52862).Z,width:"1228",height:"786"})),(0,r.kt)("p",null,"If someone buys a mobile phone, they are more likely to buy accessories like a leather cover, battery pack, wireless headphones, and so on."),(0,r.kt)("table",null,(0,r.kt)("tr",null,(0,r.kt)("td",null,"Basket"),(0,r.kt)("td",null,"Product 1"),(0,r.kt)("td",null,"Product 2"),(0,r.kt)("td",null," Product 3")),(0,r.kt)("tr",null,(0,r.kt)("td",null,"1"),(0,r.kt)("td",null,"Mobile Phone"),(0,r.kt)("td",null,"Leather Cover"),(0,r.kt)("td",null,"Tempered Glass Screen")),(0,r.kt)("tr",null,(0,r.kt)("td",null,"2"),(0,r.kt)("td",null,"Mobile Phone"),(0,r.kt)("td",null,"Tempered Glass Screen"),(0,r.kt)("td",null)),(0,r.kt)("tr",null,(0,r.kt)("td",null,"3"),(0,r.kt)("td",null,"Mobile Phone"),(0,r.kt)("td",null,"64GB SD card"),(0,r.kt)("td",null,"Battery Pack")),(0,r.kt)("tr",null,(0,r.kt)("td",null,"4"),(0,r.kt)("td",null,"Leather Cover"),(0,r.kt)("td",null,"1 year Damage Protection"),(0,r.kt)("td",null)),(0,r.kt)("tr",null,(0,r.kt)("td",null,"5"),(0,r.kt)("td",null,"Mobile Phone"),(0,r.kt)("td",null,"1 year Damage Protection"),(0,r.kt)("td",null,"Tempered Glass Screen"))),(0,r.kt)("p",null,"As shown above, there are five baskets containing varying combinations of Mobile Phone, Earphone, Battery Pack, and Leather Cover. Retailers use the results of the Market Basket Analysis to guide product placement in stores as well as cross-category and co-marketing promotions."),(0,r.kt)("p",null,"Online fraud, which is soaring due to growth in online transactions, digital identity threats, cybercrime, and customer fraud, ",(0,r.kt)("a",{parentName:"p",href:"https://www.marketsandmarkets.com/Market-Reports/fraud-detection-prevention-market-1312.html"},"is a $20 billion problem")," that just keeps getting worse and worse, especially for financial services companies. According to a recent report, 79% of retailers have observed an increase in fraud. All of these results are driving fraud detection to be much more important than ever before."),(0,r.kt)("p",null,"Interestingly, Market Basket Analysis is also used in fraud detection. It may be possible to identify purchase behavior that can be associated with fraud on the basis of MBA data that contain credit card information. Watch this ",(0,r.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=UBRuYVn4MjQ"},"video")," for more information on this topic."),(0,r.kt)("p",null,"In the following example, we demonstrate how you can quickly run your Market Basket Analysis using RedisAI and RedisGears. This tutorial will allow you to score various baskets based on pre-populated users and profiles. The data was pulled from ",(0,r.kt)("a",{parentName:"p",href:"https://s3.amazonaws.com/amazon-reviews-pds/readme.html"},"Amazon reviews datasets")," and the model was built using reviews with verified purchases. Individual user profiles were compiled and analyzed to describe baskets that were trained to build the model that is included in this repo."),(0,r.kt)("h3",{id:"prerequisites"},"Prerequisites:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Docker"),(0,r.kt)("li",{parentName:"ul"},"Docker Compose")),(0,r.kt)("h3",{id:"step-1-clone-the-repository"},"Step 1. Clone the repository"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"git clone https://github.com/redis-field-engineering/demo-market-basket-analysis\n")),(0,r.kt)("h3",{id:"step-2-bring-up-the-services"},"Step 2. Bring up the services"),(0,r.kt)("p",null,"The below compose file specifies the two services: redis as a backend and Market Basket Analysis as a frontend application. It uses a redismod Docker image that is exposed to port 6379 while the application service uses ",(0,r.kt)("inlineCode",{parentName:"p"},"maguec/ai_basket_analysis:latest "),"image that runs a container exposed to port 8080."),(0,r.kt)("h4",{id:"redis-service"},"Redis service"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"redis")," service uses a public Redis image called redismod that holds all the necessary Redis modules, such as RedisGears and RedisAI. It then binds the container and the host machine to the exposed port, ",(0,r.kt)("inlineCode",{parentName:"p"},"6379"),"."),(0,r.kt)("h4",{id:"frontend-service"},"Frontend service"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"application "),"service uses an image ",(0,r.kt)("inlineCode",{parentName:"p"},"maguec/ai_basket_analysis:latest")," pulled from the Docker Hub registry. The Docker image uses ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/redis-field-engineering/demo-market-basket-analysis/blob/master/app.py"},"app.py")," that is just 161 lines of Python code written to be as simple as possible. It then binds the container and the host machine to the exposed port, ",(0,r.kt)("inlineCode",{parentName:"p"},"8080.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'version: \'3\'\n\n\nservices:\n  redis:\n    image: "redislabs/redismod:edge"\n    ports:\n      - "6379:6379"\n  application:\n    image: "maguec/ai_basket_analysis:latest"\n    links:\n      - "redis:redis"\n    ports:\n      - "8080:8080"\n    environment:\n        - REDIS_SERVER=redis\n        - REDIS_PORT=6379\n\n')),(0,r.kt)("p",null,"From your project directory, start up your application by running ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose up"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"docker-compose up -d\n")),(0,r.kt)("h3",{id:"step-3-list-the-service-status"},"Step 3. List the service status"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'docker-compose ps\nNAME                                        COMMAND                  SERVICE             STATUS              PORTS\ndemo-market-basket-analysis-application-1   "python3 app.py"         application         running             0.0.0.0:8080->8080/tcp\ndemo-market-basket-analysis-redis-1         "redis-server --load\u2026"   redis               running             0.0.0.0:6379->6379/tcp\n\n')),(0,r.kt)("h3",{id:"step-4-access-the-app"},"Step 4. Access the app"),(0,r.kt)("p",null,"Open ",(0,r.kt)("a",{parentName:"p",href:"https://localhost:8080"},"https://localhost:8080")," to access the application."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(97600).Z,width:"1384",height:"558"})),(0,r.kt)("p",null,"Select your preferred user from the list (e.g., pcgamer)"),(0,r.kt)("p",null,"Once you select the user, click login and that will open the profile page:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(77698).Z,width:"1454",height:"616"})),(0,r.kt)("p",null,"Click on the cart tab and add new items."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(50804).Z,width:"1388",height:"690"})),(0,r.kt)("p",null,"Click \u201cScore\u201d and you will find that all the previously purchased categories will get pre-checked."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(36410).Z,width:"1366",height:"690"})),(0,r.kt)("p",null,"As shown above, red indicates that this category of item has not been purchased by the customer before, while green indicates what has previously been purchased. Let us select a different user and experiment with baskets."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(85546).Z,width:"1396",height:"286"})),(0,r.kt)("p",null,"Click \u201cLogin.\u201d"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(2129).Z,width:"1242",height:"998"})),(0,r.kt)("p",null,"Click \u201cCart.\u201d"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(46277).Z,width:"1406",height:"676"})),(0,r.kt)("p",null,"Click \u201cScore.\u201d"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(57643).Z,width:"1332",height:"1298"})),(0,r.kt)("h3",{id:"how-does-it-work"},"How does it work?"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(39976).Z,width:"1382",height:"832"})),(0,r.kt)("p",null,"User profiles are stored in Redis as ",(0,r.kt)("a",{parentName:"p",href:"https://redis.io/commands#hash"},"hash data structures"),". After the user adds items to the cart for scoring, the cart is transformed into a tensor scored by ",(0,r.kt)("a",{parentName:"p",href:"https://redisai.io/"},"RedisAI"),", and a confidence score is returned."),(0,r.kt)("h3",{id:"scoring"},"Scoring"),(0,r.kt)("p",null,'The scores vary between 0 and 1. A score closer to 1 indicates that the basket of items by category is more likely to mirror broader purchasing patterns. Let\u2019s look at another example for a user profile named "splurgenarrow":'),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(80707).Z,width:"1348",height:"700"})),(0,r.kt)("p",null,'If we add Wireless, then this is a highly likely basket with a score of 0.99989. Adding items categorized as "Wireless" results in a basket with a high likelihood of matching the purchasing patterns that we have modeled from previous data.'),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(49758).Z,width:"1394",height:"832"})),(0,r.kt)("p",null,"You can use the Redis ",(0,r.kt)("a",{parentName:"p",href:"https://redis.io/commands/monitor"},"MONITOR")," command in order to stream back every command processed by the Redis server. As shown below, you will find Redis data structures called \u201cHashes\u201d commands that hold various field-value pairs for representing data objects."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"GET" "session:53ee3f94-c507-4075-a60f-871546e2f90f"\n"EXISTS" "USERLIST"\n"SMEMBERS" "USERLIST"\n...\n"SETEX"\n"GET" "session:53ee3f94-c507-4075-a60f-871546e2f90f"\n"SETEX"\n..\n"GET" "session:53ee3f94-c507-4075-a60f-871546e2f90f"\n"HGETALL" "user:splurgenarrow"\n')),(0,r.kt)("p",null,"But if we add Major_Appliances, it will be an unlikely basket with a score of 0.00917"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"alt_text",src:a(22431).Z,width:"1344",height:"820"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"GET" "session:53ee3f94-c507-4075-a60f-871546e2f90f"\n"AI.TENSORSET" "TENSOR:53ee3f94-c507-4075-a60f-871546e2f90f" "FLOAT" "1" "43" "VALUES" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "2.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "2.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "1.0" "0.0" "0.0" "0.0" "0.0" "0.0" "0.0" "16.0" "0.0" "0.0" "0.0" "0.0" "0.0"\n"AI.MODELRUN" "profile_model" "INPUTS" "TENSOR:53ee3f94-c507-4075-a60f-871546e2f90f" "OUTPUTS" "TENSOR:53ee3f94-c507-4075-a60f-871546e2f90f:results"\n"AI.TENSORGET" "TENSOR:53ee3f94-c507-4075-a60f-871546e2f90f:results" "META" "BLOB"\n"DEL" "TENSOR:53ee3f94-c507-4075-a60f-871546e2f90f"\n"DEL" "TENSOR:53ee3f94-c507-4075-a60f-871546e2f90f:results"\n"HGETALL" "user:splurgenarrow"\n"SETEX"\n\n')),(0,r.kt)("h3",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"As digital marketing continues to grow, data-mining techniques such as Market Basket Analysis, powered with Redis Modules like RedisAI and RedisGears, are increasingly necessary for online retailers to better understand customer purchasing patterns. Retailers can use this insight into which items are frequently purchased together in order to optimize product placement, offer special deals, and create new product bundles to increase sales while also being better able to identify online fraud."),(0,r.kt)("h3",{id:"further-references"},"Further References:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/redis-field-engineering/demo-market-basket-analysis"},"Source code of Market Basket Analysis ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=UBRuYVn4MjQ"},"Real-Time Fraud Detection with Azure and Redis Enterprise"))))}p.isMDXComponent=!0},92029:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image1-9544ade32a382d027db2595ebcd2d373.png"},52862:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image2-c7d2e8cacb63be5c6452729e8102c667.png"},97600:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image3-acc6952d0c889ba2d36bf77611a96c16.png"},77698:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image4-aa482d940b5c6a9aeb7137656f136c3f.png"},50804:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image5-dee4abc20cd53a35b637c43bde7f89f3.png"},36410:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image6-4bb5f53f9ebb585a17851d66e3a2e8ca.png"},57643:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image_10-a3dc07913fb0abbe21512613acae2386.png"},39976:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image_11-c3dcd08760d59d94dc05aee8e7bed94b.png"},80707:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image_12-cf556b9fa988be11db47fbbf17cc20af.png"},49758:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image_13-774fa904f6a7265e4d1d68a0d03b4726.png"},22431:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image_14-2de19bb708f5c792391a7241cb00dc24.png"},85546:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image_7-ec0a6ad49c763dcffe02e106366ee32e.png"},2129:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image_8-ad4fed98132a845ae5912bdc485f1fbf.png"},46277:(e,t,a)=>{a.d(t,{Z:()=>s});const s=a.p+"assets/images/image_9-1d651d35cde5bcd1dcdca9fc1d4892af.png"}}]);