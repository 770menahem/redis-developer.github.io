"use strict";(self.webpackChunkredis_developer_hub=self.webpackChunkredis_developer_hub||[]).push([[9499],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>u});var n=a(67294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},m=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,s=e.mdxType,i=e.originalType,l=e.parentName,m=r(e,["components","mdxType","originalType","parentName"]),c=d(a),u=s,h=c["".concat(l,".").concat(u)]||c[u]||p[u]||i;return a?n.createElement(h,o(o({ref:t},m),{},{components:a})):n.createElement(h,o({ref:t},m))}));function u(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var i=a.length,o=new Array(i);o[0]=c;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r.mdxType="string"==typeof e?e:s,o[1]=r;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},50358:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(67294),s=a(52263);const i="authorByline_VoxI",o="authorLabel_a70t",r="authorProfileImage_URwT";const l=function(e){let{frontMatter:t}=e;const{siteConfig:a}=(0,s.Z)(),l=a.customFields.authors;return n.createElement(n.Fragment,null,t.authors&&n.createElement("div",{className:"docAuthors"},n.createElement("hr",null),t.authors.map((e=>n.createElement("div",{key:e,className:i},n.createElement("img",{className:r,src:`/img/${l[e].image?l[e].image:"default_author_profile_pic.png"}`,alt:`Profile picture for ${l[e].name}`}),n.createElement("div",null,n.createElement("div",{className:o},"Author:"),n.createElement("div",null,n.createElement("a",{href:l[e].link,target:"_blank"},l[e].name),", ",l[e].title))))),n.createElement("hr",null)))}},26231:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>m});var n=a(87462),s=(a(67294),a(3905)),i=a(50358);const o={id:"index-memoryanalyzer",title:"Optimize & Analyze Redis using RedisInsight Memory Analyzer Tool",sidebar_label:"Optimize & Analyze Redis using RedisInsight Memory Analyzer Tool",slug:"/explore/redisinsight/memoryanalyzer",authors:["ajeet"]},r=void 0,l={unversionedId:"explore/redisinsight/memoryanalyzer/index-memoryanalyzer",id:"explore/redisinsight/memoryanalyzer/index-memoryanalyzer",title:"Optimize & Analyze Redis using RedisInsight Memory Analyzer Tool",description:"RedisInsight, a free web-based GUI management interface for Redis, offers several tools to manage and optimize Redis, with the main focus on memory optimization. RedisInsight Memory analysis helps you analyze your Redis instance, reduce memory usage, and improve application performance.",source:"@site/docs/explore/redisinsight/memoryanalyzer/index-memoryanalyzer.mdx",sourceDirName:"explore/redisinsight/memoryanalyzer",slug:"/explore/redisinsight/memoryanalyzer",permalink:"/explore/redisinsight/memoryanalyzer",draft:!1,editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/explore/redisinsight/memoryanalyzer/index-memoryanalyzer.mdx",tags:[],version:"current",lastUpdatedAt:1668100601,formattedLastUpdatedAt:"Nov 10, 2022",frontMatter:{id:"index-memoryanalyzer",title:"Optimize & Analyze Redis using RedisInsight Memory Analyzer Tool",sidebar_label:"Optimize & Analyze Redis using RedisInsight Memory Analyzer Tool",slug:"/explore/redisinsight/memoryanalyzer",authors:["ajeet"]},sidebar:"docs",previous:{title:"Debug Redis using RedisInsight Slowlog Debugging Tool",permalink:"/explore/redisinsight/slowlog"},next:{title:"Manage Your Redis Cluster using RedisInsight Cluster Management Tool",permalink:"/explore/redisinsight/cluster"}},d={},m=[{value:"Step 1: Create a Redis database",id:"step-1-create-a-redis-database",level:2},{value:"Step 2: Download RedisInsight",id:"step-2-download-redisinsight",level:2},{value:"Step 3: Connect to Redis database",id:"step-3-connect-to-redis-database",level:2},{value:"Step 4: Store Redis user sample datasets",id:"step-4-store-redis-user-sample-datasets",level:2},{value:"Keyspace Summary",id:"keyspace-summary",level:2},{value:"Recommendations",id:"recommendations",level:2},{value:"Memory Analyzer",id:"memory-analyzer",level:2},{value:"Additional Links",id:"additional-links",level:2}],p={toc:m};function c(e){let{components:t,...r}=e;return(0,s.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)(i.Z,{frontMatter:o,mdxType:"Authors"}),(0,s.kt)("p",null,"RedisInsight, a free web-based GUI management interface for Redis, offers several tools to manage and optimize Redis, with the main focus on memory optimization. RedisInsight Memory analysis helps you analyze your Redis instance, reduce memory usage, and improve application performance."),(0,s.kt)("p",null,"Let\u2019s assume that you noticed high memory usage out of your Redis instance and you want to analyze any specific cache/key pattern, which may be consuming most of the memory or not using Redis in a very efficient way. RedisInsight is a great tool that can help you analyze memory used by Redis through keys or key patterns, expiry,data types, or the instance\u2019s internal encoding. Analysis can be done in two ways\u2014online and offline mode(discussed later in the tutorial)."),(0,s.kt)("p",null,"This tutorial demonstrates the below list of features under RedisInsight:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Memory Overview"),(0,s.kt)("li",{parentName:"ul"},"Keyspace Summary"),(0,s.kt)("li",{parentName:"ul"},"Recommendations"),(0,s.kt)("li",{parentName:"ul"},"Memory Analyzer")),(0,s.kt)("p",null,"Follow the steps below to see how memory analysis can be performed over Redis Database(RDB) dumps using RedisInsight."),(0,s.kt)("h2",{id:"step-1-create-a-redis-database"},"Step 1: Create a Redis database"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://developer.redis.com/create"},"Follow this link "),"to create Redis database"),(0,s.kt)("h2",{id:"step-2-download-redisinsight"},"Step 2: Download RedisInsight"),(0,s.kt)("p",null,"To install RedisInsight on your local system, you need to first download the software from the Redis website."),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://redis.com/redis-enterprise/redis-insight/#insight-form"},"Click this link ")," to access a form that allows you to select the operating system of your choice."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"My Image",src:a(28291).Z,width:"1464",height:"1256"})),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"If you're using RedisInsight Docker container, you might need to follow the below steps to add a mount point so as to access the RDB dumps.")),(0,s.kt)("p",null,"It is recommended to add a volume mount point using the \u201d-v\u201d parameter as shown below:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"}," mkdir memorytest\n docker run -d -v /temp/memorytest:/db -p 8001:8001 redislabs/redisinsight:latest\n")),(0,s.kt)("p",null,"Run the installer. After the web server starts, open http://YOUR_HOST_IP:8001 and add a Redis database connection."),(0,s.kt)("p",null,'Select "Connect to a Redis database"'),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"My Image",src:a(22078).Z,width:"1790",height:"838"})),(0,s.kt)("h2",{id:"step-3-connect-to-redis-database"},"Step 3: Connect to Redis database"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:a(54984).Z,width:"1496",height:"1090"})),(0,s.kt)("h2",{id:"step-4-store-redis-user-sample-datasets"},"Step 4: Store Redis user sample datasets"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"}," git clone https://github.com/redis-developer/redis-datasets\n cd redis-datasets/user-database\n")),(0,s.kt)("p",null,"Execute the below command to import users database"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"},' redis-cli -h 192.168.1.9 -p 6379 < ./import_users.redis\n ..\n ..\n "5996 Users Created"\n')),(0,s.kt)("p",null,"Under RedisInsight GUI, click on \u201cMemory Analyzer\u201d under Browser.\nBefore you click on \u201cAnalysis,\u201d ensure that you store dump.rdb at the right location.\nIf you\u2019re on Mac, the Redis dump file is located under /usr/local/var/db/redis"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"}," tree /usr/local/var/db\n /usr/local/var/db\n \u2514\u2500\u2500 redis\n   \u2514\u2500\u2500 dump.rdb\n\n 1 directory, 1 file\n\n")),(0,s.kt)("p",null,"Copy the dump.rdb to /memorytest/ location. You can also verify if that file is available in the container by using docker exec command."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"}," ls\n bulk_operation     dump.rdb        queries.log     redisinsight.log\n dropbox            profiler_logs       redisinsight.db     rsnaps\n")),(0,s.kt)("p",null,"Memory analysis in RedisInsight is done in two different ways:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Online mode")," - In this mode, RedisInsight downloads a rdb file from your connected redis instance and analyzes it to create a temp file with all the keys and meta data required for analysis."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("strong",{parentName:"li"},"Offline mode")," - In this mode, RedisInsight analyzes your Redis backup files. These files can either be present in your system or on s3. RedisInsight accepts a list of rdb files given to it and analyzes all the information required from these files instead of downloading it from your Redis instance.")),(0,s.kt)("p",null,"Choose the offline analysis approach if you have a RDB Backup file that you want to analyze."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:a(44406).Z,width:"1414",height:"960"})),(0,s.kt)("p",null,"Enter the right location of the RDB backup file as shown below:"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:a(54534).Z,width:"1236",height:"664"})),(0,s.kt)("p",null,"Click \u201cProceed\u201d."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:a(52929).Z,width:"1600",height:"1040"})),(0,s.kt)("admonition",{type:"note"},(0,s.kt)("p",{parentName:"admonition"},"If you are using online memory analysis, you will want to have enough space to store the RDB file for your Redis database. This is usually 10-50% of the Redis instance\u2019s memory usage.")),(0,s.kt)("h2",{id:"keyspace-summary"},"Keyspace Summary"),(0,s.kt)("p",null,"Keyspace Summary identifies the top key patterns from the set of keys in descending order of memory. This helps you identify which key patterns are consuming most of your memory and what are the top keys for that pattern. You can add your own key patterns in order to identify their memory usage and the top keys for that key pattern."),(0,s.kt)("p",null,"Click \u201cKeyspace\u201d and you will see the total memory consumed by each of the top key patterns as shown below:"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:a(28261).Z,width:"1600",height:"958"})),(0,s.kt)("p",null,"You can click on each of these keys patterns(as shown above) and check the memory usage."),(0,s.kt)("h2",{id:"recommendations"},"Recommendations"),(0,s.kt)("p",null,"RedisInsight provides recommendations on how you can save your memory. The recommendations are specially curated according to your Redis instance. These recommendations have been formed based on industry standards."),(0,s.kt)("admonition",{type:"tip"},(0,s.kt)("p",{parentName:"admonition"},"Combine Small Strings to Hash"),(0,s.kt)("p",{parentName:"admonition"},"Small key value pairs in redis consume a lot of memory because a top level key has several overheads. If you do not need an expiry on these keys, you can combine multiple keys into a larger hash. As long as the hash has less than 512 elements and the size of each element is within 64 bytes, you will save a significant amount of memory.\nRead Instagram's blog post on how they used this technique to save memory\nOnce you combine strings into a larger hash, evaluate hash-max-ziplist-entries and hash-max-ziplist-value settings. You may want to increase them to save even more memory."),(0,s.kt)("p",{parentName:"admonition"},"Performance comes with a cost. By converting the strings to hash, we will be saving on a lot of memory because it saves only the string value and no extra information like: idle time, expiration, object reference count, and encoding related to it. But if we want the key with the expiration value, we can't associate it with a hash structure as expiration is not available.")),(0,s.kt)("p",null,"Let us add 1 million keys using redis-benchmark tool:"),(0,s.kt)("p",null,"Fill 127.0.0.1:6379 with about 1 million keys only using the SET test:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-bash"}," redis-benchmark -t set -n 1000000 -r 100000000\n \u2026\n 100.000% <= 1011.199 milliseconds (cumulative count 1000000)\n\nSummary:\n throughput summary: 13451.89 requests per second\n latency summary (msec):\n         avg       min       p50       p95       p99       max\n       3.600     0.616     3.007     5.591     7.567  1011.199\n\n")),(0,s.kt)("p",null,"Click on Recommendations and you will see the below messages"),(0,s.kt)("admonition",{type:"tip"},(0,s.kt)("p",{parentName:"admonition"},"Avoid unnecessary Long Keys"),(0,s.kt)("p",{parentName:"admonition"},"You can save some memory by avoiding large keys. In general, you should always prefer descriptive keys. This recommendation only applies if you have millions of very large keys. In a well written application, switching to shorter keys usually involves updating a few constant strings in the application code.\nThe trade off of converting large keys to smaller keys is that large Keys were more descriptive then shortened keys, hence when reading through your database you may find the keys less relatable. Read More\nKey patterns that need to be modified:\nkey:","*")),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:a(87671).Z,width:"1220",height:"872"})),(0,s.kt)("h2",{id:"memory-analyzer"},"Memory Analyzer"),(0,s.kt)("p",null,"Memory Analyzer lets you search a key or key patterns and get related information regarding it with other stats. You can apply various filters and aggregations using our advance filters feature."),(0,s.kt)("p",null,"When the ",(0,s.kt)("inlineCode",{parentName:"p"},"analyze-memory")," button is clicked, it connects to the redis instance and takes a point-in-time snapshot of the database. ",(0,s.kt)("a",{parentName:"p",href:"https://docs.redis.com/latest/ri/using-redisinsight/memory-analysis/#how-memory-analysis-works"},"Here\u2019s a link")," that deep dive into SYNC and DUMP approach"),(0,s.kt)("p",null,"Considering 1 million keys only using the SET command, you can view the memory analyzer section and click \u201cAdvanced Filters\u201d."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:a(33590).Z,width:"2344",height:"814"})),(0,s.kt)("p",null,"The advanced filters allow you to choose data type, encoding, memory, group by data types, encoding, aggregate etc."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:a(24767).Z,width:"1220",height:"872"})),(0,s.kt)("p",null,"You can check memory usage by key:"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:a(6).Z,width:"1600",height:"484"})),(0,s.kt)("h2",{id:"additional-links"},"Additional Links"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/explore/redisinsight/slowlog"},"Slowlog Configuration using RedisInsight")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/explore/redisinsight/browser"},"Explore Redis keys using RedisInsight browser tool")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/explore/redisinsight/cluster"},"Cluster Management with ease using RedisInsight"))))}c.isMDXComponent=!0},87671:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image11-1d8ac34f7e15df0de930da55cd1ef694.png"},33590:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image13-3de15d46b6a15609895352c112953d2d.png"},24767:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image14-1d8ac34f7e15df0de930da55cd1ef694.png"},6:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image15-4e9b0da6f308bf8770f875103f86511d.png"},54984:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image2-27216a26971f2f6b8f036882c119e8c4.png"},44406:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image4-5744e101409b891dd85eeeea952bfdb5.png"},54534:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image5-e817d057775d7cb941daa2733683e366.png"},52929:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image6-7a63982c6a0316c109aec3023c2d8e82.png"},28261:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/image7-70639e5f4d56d0a91f081437e4d49eff.png"},22078:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/redisinsight4-c10ff2035f21df96053f824b1eefd790.png"},28291:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/redisinsightinstall-b920e816c541305ea0ea2dd2593f5a0f.png"}}]);