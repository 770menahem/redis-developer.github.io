"use strict";(self.webpackChunkredis_developer_hub=self.webpackChunkredis_developer_hub||[]).push([[5980],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>h});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),p=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(r),h=n,m=c["".concat(l,".").concat(h)]||c[h]||d[h]||i;return r?a.createElement(m,s(s({ref:t},u),{},{components:r})):a.createElement(m,s({ref:t},u))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,s=new Array(i);s[0]=c;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:n,s[1]=o;for(var p=2;p<i;p++)s[p]=r[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,r)}c.displayName="MDXCreateElement"},50358:(e,t,r)=>{r.d(t,{Z:()=>l});var a=r(67294),n=r(52263);const i="authorByline_VoxI",s="authorLabel_a70t",o="authorProfileImage_URwT";const l=function(e){let{frontMatter:t}=e;const{siteConfig:r}=(0,n.Z)(),l=r.customFields.authors;return a.createElement(a.Fragment,null,t.authors&&a.createElement("div",{className:"docAuthors"},a.createElement("hr",null),t.authors.map((e=>a.createElement("div",{key:e,className:i},a.createElement("img",{className:o,src:`/img/${l[e].image?l[e].image:"default_author_profile_pic.png"}`,alt:`Profile picture for ${l[e].name}`}),a.createElement("div",null,a.createElement("div",{className:s},"Author:"),a.createElement("div",null,a.createElement("a",{href:l[e].link,target:"_blank"},l[e].name),", ",l[e].title))))),a.createElement("hr",null)))}},79374:(e,t,r)=>{r.d(t,{ZP:()=>s});var a=r(87462),n=(r(67294),r(3905));const i={toc:[]};function s(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},i,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("admonition",{title:"End-of-Life Notice",type:"info"},(0,n.kt)("p",{parentName:"admonition"},"Redis is phasing out ",(0,n.kt)("strong",{parentName:"p"},"RedisGraph"),". ",(0,n.kt)("a",{parentName:"p",href:"https://redis.com/blog/redisgraph-eol/"},(0,n.kt)("u",null,(0,n.kt)("strong",{parentName:"a"},"This blog post")))," explains the motivation behind this decision and the implications for existing Redis customers and community members."),(0,n.kt)("p",{parentName:"admonition"},"End of support is scheduled for January 31, 2025."),(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("em",{parentName:"p"},"Beginning with Redis Stack 7.2.x-y, Redis Stack will no longer include graph capabilities (RedisGraph)."))))}s.isMDXComponent=!0},46203:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>p,toc:()=>d});var a=r(87462),n=(r(67294),r(3905)),i=r(50358),s=r(79374);const o={id:"index-usingruby",title:"How to query Graph data in Redis using Ruby",sidebar_label:"RedisGraph and Ruby",slug:"/howtos/redisgraph/using-ruby",authors:["ajeet"]},l=void 0,p={unversionedId:"howtos/redisgraph/using-ruby/index-usingruby",id:"howtos/redisgraph/using-ruby/index-usingruby",title:"How to query Graph data in Redis using Ruby",description:"RedisGraph is the first queryable Property Graph database to use sparse matrices to represent the adjacency matrix in graphs and linear algebra to query the graph.",source:"@site/docs/howtos/redisgraph/using-ruby/index-usingruby.mdx",sourceDirName:"howtos/redisgraph/using-ruby",slug:"/howtos/redisgraph/using-ruby",permalink:"/howtos/redisgraph/using-ruby",draft:!1,editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/howtos/redisgraph/using-ruby/index-usingruby.mdx",tags:[],version:"current",lastUpdatedAt:1698353241,formattedLastUpdatedAt:"Oct 26, 2023",frontMatter:{id:"index-usingruby",title:"How to query Graph data in Redis using Ruby",sidebar_label:"RedisGraph and Ruby",slug:"/howtos/redisgraph/using-ruby",authors:["ajeet"]}},u={},d=[{value:"RedisGraph Ruby Client",id:"redisgraph-ruby-client",level:2},{value:"Step 1. Run Redis Stack Docker container",id:"step-1-run-redis-stack-docker-container",level:3},{value:"Step 2. Verify if RedisGraph module is loaded",id:"step-2-verify-if-redisgraph-module-is-loaded",level:3},{value:"Step 3. Loading the RedisGraph Ruby Module",id:"step-3-loading-the-redisgraph-ruby-module",level:3},{value:"Step 4. Install the prerequisites",id:"step-4-install-the-prerequisites",level:3},{value:"Step 5. Write a Ruby code",id:"step-5-write-a-ruby-code",level:3},{value:"Step 6. Execute the Ruby code",id:"step-6-execute-the-ruby-code",level:3},{value:"Step 7. Monitor the Graph query",id:"step-7-monitor-the-graph-query",level:3},{value:"References",id:"references",level:3}],c={toc:d};function h(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)(s.ZP,{mdxType:"GraphEol"}),(0,n.kt)(i.Z,{frontMatter:o,mdxType:"Authors"}),(0,n.kt)("p",null,"RedisGraph is the first queryable Property Graph database to use sparse matrices to represent the adjacency matrix in graphs and linear algebra to query the graph.\nFew of the notable features of RedisGraph includes:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Based on the Property Graph Model"),(0,n.kt)("li",{parentName:"ul"},"Nodes (vertices) and Relationships (edges) that may have attributes"),(0,n.kt)("li",{parentName:"ul"},"Nodes that can be labeled"),(0,n.kt)("li",{parentName:"ul"},"Relationships have a relationship type"),(0,n.kt)("li",{parentName:"ul"},"Graphs represented as sparse adjacency matrices"),(0,n.kt)("li",{parentName:"ul"},"Cypher as query language"),(0,n.kt)("li",{parentName:"ul"},"Cypher queries translated into linear algebra expressions")),(0,n.kt)("p",null,"RedisGraph is based on a unique approach and architecture that translates Cypher queries to matrix operations executed over a GraphBLAS engine. This new design allows use cases like social graph operation, fraud detection, and real-time recommendation to be executed 10x \u2013 600x faster than any other graph database."),(0,n.kt)("h2",{id:"redisgraph-ruby-client"},"RedisGraph Ruby Client"),(0,n.kt)("p",null,"redisgraph-rb is a Ruby gem client for the RedisGraph module. It relies on redis-rb for Redis connection management and provides support for graph QUERY, EXPLAIN, and DELETE commands."),(0,n.kt)("p",null,"Follow the steps below to get started with RedisGraph with Ruby:"),(0,n.kt)("h3",{id:"step-1-run-redis-stack-docker-container"},"Step 1. Run Redis Stack Docker container"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"}," docker run -p 6379:6379 --name redis/redis-stack\n")),(0,n.kt)("h3",{id:"step-2-verify-if-redisgraph-module-is-loaded"},"Step 2. Verify if RedisGraph module is loaded"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"}," info modules\n # Modules\n module:name=graph,ver=20405,api=1,filters=0,usedby=[],using=[],options=[]\n")),(0,n.kt)("h3",{id:"step-3-loading-the-redisgraph-ruby-module"},"Step 3. Loading the RedisGraph Ruby Module"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"}," gem install redisgraph\n Fetching redisgraph-2.0.3.gem\n Successfully installed redisgraph-2.0.3\n 1 gem installed\n\n")),(0,n.kt)("h3",{id:"step-4-install-the-prerequisites"},"Step 4. Install the prerequisites"),(0,n.kt)("p",null,"To ensure prerequisites are installed, run the following: bundle install"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"}," bundle install\n")),(0,n.kt)("h3",{id:"step-5-write-a-ruby-code"},"Step 5. Write a Ruby code"),(0,n.kt)("p",null,'Copy the below sample code and save it in a file "test.rb"'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-ruby"},' require \'redisgraph\'\n\n graphname = "sample"\n\n r = RedisGraph.new(graphname)\n\n cmd = """CREATE (:person {name: \'Jim\', age: 29})-[:works]->(:employer {name: \'Dunder Mifflin\'})"""\n response = r.query(cmd)\n response.stats\n\n cmd = """MATCH ()-[:works]->(e:employer) RETURN e"""\n\n response = r.query(cmd)\n\n response.print_resultset\n')),(0,n.kt)("h3",{id:"step-6-execute-the-ruby-code"},"Step 6. Execute the Ruby code"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"  ruby test.rb\n")),(0,n.kt)("h3",{id:"step-7-monitor-the-graph-query"},"Step 7. Monitor the Graph query"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},' redis-cli\n 127.0.0.1:6379> monitor\n OK\n 1632716792.038955 [0 172.17.0.1:57804] "info"\n 1632716792.041201 [0 172.17.0.1:57804] "GRAPH.QUERY" "sample" "CREATE (:person {name: \'Jim\', age: 29})-[:works]->(:employer {name: \'Dunder Mifflin\'})" "--compact"\n 1632716792.042751 [0 172.17.0.1:57804] "GRAPH.QUERY" "sample" "MATCH ()-[:works]->(e:employer) RETURN e" "--compact"\n 1632716792.044241 [0 172.17.0.1:57804] "GRAPH.QUERY" "sample" "CALL db.propertyKeys()"\n 1632716812.060458 [0 172.17.0.1:57962] "COMMAND"\n 1632716813.148710 [0 172.17.0.1:57962] "GRAPH.QUERY" "sample" "CREATE (:person {name: \'Jim\', age: 29})-[:works]->(:employer {name: \'Dunder Mifflin\'})" "--compact"\n\n')),(0,n.kt)("h3",{id:"references"},"References"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Learn more about RedisGraph in the ",(0,n.kt)("a",{parentName:"li",href:"https://oss.redis.com/redisgraph/"},"Quickstart")," tutorial.")),(0,n.kt)("h2",{id:""}),(0,n.kt)("div",null,(0,n.kt)("a",{href:"https://launchpad.redis.com",target:"_blank",rel:"noopener",className:"link"},(0,n.kt)("img",{src:"/img/launchpad.png",className:"thumb",loading:"lazy",alt:"Redis Launchpad"}))))}h.isMDXComponent=!0}}]);