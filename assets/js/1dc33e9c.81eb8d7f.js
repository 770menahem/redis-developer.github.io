"use strict";(self.webpackChunkredis_developer_hub=self.webpackChunkredis_developer_hub||[]).push([[87],{3905:function(e,t,r){r.d(t,{Zo:function(){return l},kt:function(){return m}});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=n.createContext({}),u=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},l=function(e){var t=u(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),c=u(r),m=o,h=c["".concat(p,".").concat(m)]||c[m]||d[m]||a;return r?n.createElement(h,s(s({ref:t},l),{},{components:r})):n.createElement(h,s({ref:t},l))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,s=new Array(a);s[0]=c;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var u=2;u<a;u++)s[u]=r[u];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}c.displayName="MDXCreateElement"},28407:function(e,t,r){r.r(t),r.d(t,{assets:function(){return l},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return d}});var n=r(87462),o=r(63366),a=(r(67294),r(3905)),s=["components"],i={id:"index-popupstore",title:"Building a Popup Store  application using Redis",sidebar_label:"Building a Popup Store application using Redis",slug:"/howtos/popupstore",authors:["ajeet"]},p=void 0,u={unversionedId:"howtos/popupstore/index-popupstore",id:"howtos/popupstore/index-popupstore",title:"Building a Popup Store  application using Redis",description:"Pop-up stores are becoming a popular channel for retailers to create a new revenue stream, generate buzz with customers, test product concepts, or unload excess inventory. Since the idea is to spin up the store quickly and then close it shortly thereafter, it doesn\u2019t make sense to spend a lot of time on development. With the right Redis modules, you can create a robust customer experience without a lot of development effort.",source:"@site/docs/howtos/popupstore/index-popupstore.mdx",sourceDirName:"howtos/popupstore",slug:"/howtos/popupstore",permalink:"/howtos/popupstore",draft:!1,editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/howtos/popupstore/index-popupstore.mdx",tags:[],version:"current",lastUpdatedAt:1655485542,formattedLastUpdatedAt:"6/17/2022",frontMatter:{id:"index-popupstore",title:"Building a Popup Store  application using Redis",sidebar_label:"Building a Popup Store application using Redis",slug:"/howtos/popupstore",authors:["ajeet"]},sidebar:"docs",previous:{title:"Building an Analytics dashboard app using Redis",permalink:"/howtos/analytics"},next:{title:"How to build a NodeJS based application on Heroku using Redis",permalink:"/howtos/herokunodejs"}},l={},d=[{value:"Step 1. Cloning the repository",id:"step-1-cloning-the-repository",level:3},{value:"Step 2. Running the application",id:"step-2-running-the-application",level:3},{value:"Step 3. Accessing Grafana dashboard",id:"step-3-accessing-grafana-dashboard",level:3},{value:"How it works",id:"how-it-works",level:2},{value:"Addition Resources",id:"addition-resources",level:3}],c={toc:d};function m(e){var t=e.components,i=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Pop-up stores are becoming a popular channel for retailers to create a new revenue stream, generate buzz with customers, test product concepts, or unload excess inventory. Since the idea is to spin up the store quickly and then close it shortly thereafter, it doesn\u2019t make sense to spend a lot of time on development. With the right Redis modules, you can create a robust customer experience without a lot of development effort."),(0,a.kt)("p",null,"This pop-up store demo illustrates a company that sells a single product and has 10,000 units available for purchase. Each customer can purchase one unit and the sale lasts only 10 minutes, so order processing must be instantaneous. The demo shows how to visualize data pipeline in real-time using ",(0,a.kt)("a",{parentName:"p",href:"https://redis.io/topics/streams-intro"},"Redis Streams"),", ",(0,a.kt)("a",{parentName:"p",href:"https://developer.redis.com/howtos/redistimeseries"},"RedisTimeSeries"),", ",(0,a.kt)("a",{parentName:"p",href:"https://developer.redis.com/howtos/redisgears"},"RedisGears")," and ",(0,a.kt)("a",{parentName:"p",href:"https://developer.redis.com/explore/redisdatasource"},"Redis Datasource with Grafana"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Pop-up",src:r(58805).Z,width:"1200",height:"516"})),(0,a.kt)("h3",{id:"step-1-cloning-the-repository"},"Step 1. Cloning the repository"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"git clone https://github.com/redis-developer/redis-pop-up-store/\n")),(0,a.kt)("h3",{id:"step-2-running-the-application"},"Step 2. Running the application"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"docker-compose up -d\n")),(0,a.kt)("h3",{id:"step-3-accessing-grafana-dashboard"},"Step 3. Accessing Grafana dashboard"),(0,a.kt)("p",null,"Open http://IPAddress:3000 to access the grafana dashboard"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Grafana",src:r(30688).Z,width:"3442",height:"1498"})),(0,a.kt)("p",null,"Grafana query streams and Time-Series keys every 5 seconds to display samples using Grafana Redis Datasource.This Grafana dashboard displays:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Product Available: the value of product key, which decreases as orders complete"),(0,a.kt)("li",{parentName:"ul"},"Customers Ordering, Orders Processing, and Orders Completed: the length of queue:customers, queue:orders, and queue:complete streams"),(0,a.kt)("li",{parentName:"ul"},"Customers Overflow: the difference between customer-submitted orders and orders completed"),(0,a.kt)("li",{parentName:"ul"},"Customers Ordering: orders created in 5 seconds"),(0,a.kt)("li",{parentName:"ul"},"Orders In Queue: orders waiting to be processed"),(0,a.kt)("li",{parentName:"ul"},"Completed Flow: orders completed in 5 seconds")),(0,a.kt)("h2",{id:"how-it-works"},"How it works"),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Diagram",src:r(75356).Z,width:"2206",height:"909"})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Node.js script adds random data to Customers and Orders streams"),(0,a.kt)("li",{parentName:"ul"},"RedisGears is using ",(0,a.kt)("inlineCode",{parentName:"li"},"StreamReader")," to watch all ",(0,a.kt)("inlineCode",{parentName:"li"},"queue:")," keys and adding Time-Series samples")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# Add Time-Series\ndef tsAdd(x):\n   xlen = execute('XLEN', x['key'])\n   execute('TS.ADD', 'ts:len:'+x['key'], '*', xlen)\n   execute('TS.ADD', 'ts:enqueue:' + x['key'], '*', x['value'])\n\n\n# Stream Reader for any Queue\ngb = GearsBuilder('StreamReader')\ngb.countby(lambda x: x['key']).map(tsAdd)\ngb.register(prefix='queue:*', duration=5000, batch=10000, trimStream=False)\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Another RedisGears script completes orders",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"adding data to ",(0,a.kt)("inlineCode",{parentName:"li"},"queue:complete")," stream"),(0,a.kt)("li",{parentName:"ul"},"deleting client's ordering"),(0,a.kt)("li",{parentName:"ul"},"decreasing product amount"),(0,a.kt)("li",{parentName:"ul"},"trimming Orders queue")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# Complete order\ndef complete(x):\n    execute('XADD', 'queue:complete', '*', 'order', x['id'],\n            'customer', x['value']['customer'])\n    execute('XDEL', 'queue:customers', x['value']['customer'])\n    execute('DECR', 'product')\n\n\n# Stream Reader for Orders queue\ngb = GearsBuilder('StreamReader')\ngb.map(complete)\ngb.register(prefix='queue:orders', batch=3, trimStream=True)\n")),(0,a.kt)("h3",{id:"addition-resources"},"Addition Resources"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/redis-developer/redis-pop-up-store"},"Redis Popup Store GitHub Repository")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://redis.com/blog/3-real-life-apps-built-with-redis-data-source-for-grafana/"},"3 Real-Life Apps Built with Redis Data Source for Grafana"))))}m.isMDXComponent=!0},30688:function(e,t,r){t.Z=r.p+"assets/images/grafana1-b08366933d2c05d9168f48e51ec8b361.png"},75356:function(e,t,r){t.Z=r.p+"assets/images/popup-79f8148368b0467472d512af0313cec0.png"},58805:function(e,t,r){t.Z=r.p+"assets/images/popupstore-6a650c06aa4302de52a3e1ae6af34cbc.gif"}}]);