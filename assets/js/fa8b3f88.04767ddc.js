"use strict";(self.webpackChunkredis_developer_hub=self.webpackChunkredis_developer_hub||[]).push([[637],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var d=a.createContext({}),l=function(e){var t=a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=l(e.components);return a.createElement(d.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,d=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=l(n),m=i,h=p["".concat(d,".").concat(m)]||p[m]||c[m]||r;return n?a.createElement(h,s(s({ref:t},u),{},{components:n})):a.createElement(h,s({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,s=new Array(r);s[0]=p;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:i,s[1]=o;for(var l=2;l<r;l++)s[l]=n[l];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},15181:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var a=n(87462),i=(n(67294),n(3905));const r={id:"index-usingjava",title:"Modeling JSON Documents with Redis and Java",sidebar_label:"Redis JSON and Java",slug:"/howtos/redisjson/using-java"},s=void 0,o={unversionedId:"howtos/redisjson/using-java/index-usingjava",id:"howtos/redisjson/using-java/index-usingjava",title:"Modeling JSON Documents with Redis and Java",description:"Redis JSON lets you store, index, and query JSON data in Redis. Jedis, a Java driver for Redis, provides full support for Redis JSON as of the 4.0 release.",source:"@site/docs/howtos/redisjson/using-java/index-usingjava.mdx",sourceDirName:"howtos/redisjson/using-java",slug:"/howtos/redisjson/using-java",permalink:"/howtos/redisjson/using-java",draft:!1,editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/howtos/redisjson/using-java/index-usingjava.mdx",tags:[],version:"current",lastUpdatedAt:1686308775,formattedLastUpdatedAt:"Jun 9, 2023",frontMatter:{id:"index-usingjava",title:"Modeling JSON Documents with Redis and Java",sidebar_label:"Redis JSON and Java",slug:"/howtos/redisjson/using-java"},sidebar:"docs",previous:{title:"Redis JSON and Go",permalink:"/howtos/redisjson/using-go"},next:{title:"Redis JSON using RedisInsight",permalink:"/howtos/redisjson/using-redisinsight"}},d={},l=[{value:"1. Run the Redis Stack Docker container",id:"1-run-the-redis-stack-docker-container",level:3},{value:"2. Add Jedis as a Dependency",id:"2-add-jedis-as-a-dependency",level:3},{value:"3. Connect to Redis",id:"3-connect-to-redis",level:3},{value:"4. Model Your Domain",id:"4-model-your-domain",level:2},{value:"Querying and indexing JSON",id:"querying-and-indexing-json",level:2}],u={toc:l};function c(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Redis JSON lets you store, index, and query JSON data in Redis. Jedis, a Java driver for Redis, provides full support for Redis JSON as of the 4.0 release."),(0,i.kt)("p",null,"Follow along with the steps below to get started with Java and Redis JSON."),(0,i.kt)("h3",{id:"1-run-the-redis-stack-docker-container"},"1. Run the Redis Stack Docker container"),(0,i.kt)("p",null,"The Redis Stack docker container bundles the Redis features that power JSON. To get a running Redis instance with JSON, run the following bash command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"}," docker run -d -p 6379:6379 redis/redis-stack:latest\n")),(0,i.kt)("h3",{id:"2-add-jedis-as-a-dependency"},"2. Add Jedis as a Dependency"),(0,i.kt)("p",null,"You'll need to add Jedis to your Java project. If you're using ",(0,i.kt)("a",{parentName:"p",href:"https://maven.apache.org/install.html"},"Maven"),", the dependency will look something like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},"<dependency>\n    <groupId>redis.clients</groupId>\n    <artifactId>jedis</artifactId>\n    <version>4.0.0</version>\n</dependency>\n")),(0,i.kt)("p",null,"Replace the version with your desired version of Jedis, but note that you'll need Jedis 4.0 or greater to get Redis JSON support."),(0,i.kt)("h3",{id:"3-connect-to-redis"},"3. Connect to Redis"),(0,i.kt)("p",null,"You'll need to initialize you connection to Redis. This means configuring and creating a ",(0,i.kt)("inlineCode",{parentName:"p"},"UnifiedJedis")," instance:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"  HostAndPort config = new HostAndPort(Protocol.DEFAULT_HOST, 6379);\n  PooledConnectionProvider provider = new PooledConnectionProvider(config);\n  UnifiedJedis client = new UnifiedJedis(provider);\n")),(0,i.kt)("h2",{id:"4-model-your-domain"},"4. Model Your Domain"),(0,i.kt)("p",null,"You'll need to represent your data by creating ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Plain_old_Java_object"},"POJOs"),". Jedis will then help you serialize these objects to JSON."),(0,i.kt)("p",null,"Suppose you're building an online learning platform, and you want to represent\nstudents. Let's create a simple POJO to represent these students:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"private class Student {\n    private String firstName;\n    private String lastName;\n\n    public Student(String firstName, String lastName) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n\n    public String getFirstName() {\n      return firstName;\n    }\n\n    public String getLastName() {\n      return lastName;\n    }\n}\n")),(0,i.kt)("p",null,"Now we can create some students and store them in Redis as JSON:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Student maya = new Student("Maya", "Jayavant");\nclient.jsonSet("student:111", maya);\n\nStudent oliwia = new Student("Oliwia", "Jagoda");\nclient.jsonSet("student:112", oliwia);\n')),(0,i.kt)("p",null,"Notice we pass the ",(0,i.kt)("inlineCode",{parentName:"p"},"Student")," instances to the ",(0,i.kt)("inlineCode",{parentName:"p"},"jsonSet()"),' method. Jedis then serializes the objects and stores them in Redis at the specified keys (in this case, "student:111" and "student:112").'),(0,i.kt)("h2",{id:"querying-and-indexing-json"},"Querying and indexing JSON"),(0,i.kt)("p",null,'If we want to be able to query this JSON, we\'ll need to create an index. Let\'s\ncreate an index on the "firstName" and "lastName" fields. To do this:'),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},'We define which fields to index ("firstName" and "lastName").'),(0,i.kt)("li",{parentName:"ol"},'We set up the index definition to recognize JSON and include only those\ndocuments\nwhose key starts with "student:".'),(0,i.kt)("li",{parentName:"ol"},'Then we actually create the index, called "student-index", by calling ',(0,i.kt)("inlineCode",{parentName:"li"},"ftCreate ()"),".")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Schema schema = new Schema().addTextField("$.firstName", 1.0).addTextField("$" +\n            ".lastName", 1.0);\nIndexDefinition rule = new IndexDefinition(IndexDefinition.Type.JSON)\n        .setPrefixes(new String[]{"student:"});\nclient.ftCreate("student-index",\n            IndexOptions.defaultOptions().setDefinition(rule),\n            schema);\n')),(0,i.kt)("p",null,'With an index now defined, we can query our JSON. Let\'s find all students whose\nname begins with "maya":'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'Query q = new Query("@\\\\$\\\\" + ".firstName:maya*");\nSearchResult mayaSearch = client.ftSearch("student-index", q);\n')),(0,i.kt)("p",null,"We can then iterate over our search results:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},"List<Document> docs = mayaSearch.getDocuments();\nfor (Document doc : docs) {\n   System.out.println(doc);\n}\n")),(0,i.kt)("p",null,"This example just scratches the surface. You can atomically manipulate JSON documents and query them in a variety of ways. See the ",(0,i.kt)("a",{parentName:"p",href:"https://oss.redis.com/redisjson/"},"Redis JSON docs"),", the ",(0,i.kt)("a",{parentName:"p",href:"https://oss.redis.com/redisearch/"},"Redis Search and Query")," docs, and our course, ",(0,i.kt)("a",{parentName:"p",href:"https://university.redis.com/courses/ru203/"},'"Querying, Indexing, and Full-text Search in Redis"'),", for a lot more examples."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://university.redis.com/courses/ru204/"},"RU204: Storing, Querying and Indexing JSON at Speed")," - a course at Redis University"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/howtos/redisjson/using-python"},"Redis JSON and Python")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/howtos/redisjson/storing-complex-json-document"},"How to store and retrieve nested JSON document")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/howtos/redisjson/using-nodejs"},"Importing JSON data into Redis using NodeJS")),(0,i.kt)("li",{parentName:"ul"},"Learn more about ",(0,i.kt)("a",{parentName:"li",href:"https://oss.redis.com/redisjson/"},"Redis JSON")," in the QuickStart tutorial."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/howtos/shoppingcart"},"How to build shopping cart app using NodeJS and Redis JSON")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://redis.com/blog/index-and-query-json-docs-with-redis/"},"Indexing, Querying, and Full-Text Search of JSON Documents with Redis"))))}c.isMDXComponent=!0}}]);