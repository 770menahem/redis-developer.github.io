"use strict";(self.webpackChunkredis_developer_hub=self.webpackChunkredis_developer_hub||[]).push([[1638],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var o=r.createContext({}),c=function(e){var t=r.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=c(e.components);return r.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,i=e.originalType,o=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(a),m=n,h=d["".concat(o,".").concat(m)]||d[m]||u[m]||i;return a?r.createElement(h,s(s({ref:t},p),{},{components:a})):r.createElement(h,s({ref:t},p))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=a.length,s=new Array(i);s[0]=d;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l.mdxType="string"==typeof e?e:n,s[1]=l;for(var c=2;c<i;c++)s[c]=a[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}d.displayName="MDXCreateElement"},2327:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var r=a(87462),n=(a(67294),a(3905));const i={},s=void 0,l={unversionedId:"howtos/solutions/caching-architecture/common-caching/redis-gears",id:"howtos/solutions/caching-architecture/common-caching/redis-gears",title:"redis-gears",description:"What is RedisGears?",source:"@site/docs/howtos/solutions/caching-architecture/common-caching/redis-gears.mdx",sourceDirName:"howtos/solutions/caching-architecture/common-caching",slug:"/howtos/solutions/caching-architecture/common-caching/redis-gears",permalink:"/howtos/solutions/caching-architecture/common-caching/redis-gears",draft:!1,editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/howtos/solutions/caching-architecture/common-caching/redis-gears.mdx",tags:[],version:"current",lastUpdatedAt:1680801661,formattedLastUpdatedAt:"Apr 6, 2023",frontMatter:{}},o={},c=[{value:"What is RedisGears?",id:"what-is-redisgears",level:3},{value:"How can i try RedisGears?",id:"how-can-i-try-redisgears",level:3},{value:"Gears cli",id:"gears-cli",level:3},{value:"RedisGears references",id:"redisgears-references",level:3}],p={toc:c};function u(e){let{components:t,...a}=e;return(0,n.kt)("wrapper",(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h3",{id:"what-is-redisgears"},"What is RedisGears?"),(0,n.kt)("p",null,"RedisGears is a serverless engine for transaction, batch and event-driven data processing allowing users to write and run their own functions on data stored in Redis."),(0,n.kt)("p",null,"Functions can be implemented in different languages, including Python and C APIs and can be executed by the RedisGears engine in one of two ways:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Batch")," : triggered by the ",(0,n.kt)("a",{parentName:"li",href:"https://oss.redislabs.com/redisgears/functions.html#run"},"Run")," action, execution is immediate and on existing data"),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Event")," : triggered by the ",(0,n.kt)("a",{parentName:"li",href:"https://oss.redislabs.com/redisgears/functions.html#register"},"Register")," action, execution is triggered by new events and on their data")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Some ",(0,n.kt)("strong",{parentName:"p"},"batch")," type operations RedisGears can do:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Run an operation on all keys in the KeySpace or keys matching a certain pattern like :",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Prefix all KeyNames with ",(0,n.kt)("inlineCode",{parentName:"li"},"person:")),(0,n.kt)("li",{parentName:"ul"},"Delete all keys whose value is smaller than zero"),(0,n.kt)("li",{parentName:"ul"},"Write all the KeyNames starting with ",(0,n.kt)("inlineCode",{parentName:"li"},"person:")," to a set"))),(0,n.kt)("li",{parentName:"ul"},"Run a set of operations on all(or matched) keys where the output of one operation is the input of another like",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Find all keys with a prefix ",(0,n.kt)("inlineCode",{parentName:"li"},"person:")," (assume all of them are of type hash)"),(0,n.kt)("li",{parentName:"ul"},"Increase user's days_old by 1, then sum them by age group (10-20, 20-30 etc.)"),(0,n.kt)("li",{parentName:"ul"},"Add today's stats to the sorted set of every client, calculate last 7 days average and save the computed result in a string"))))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Some ",(0,n.kt)("strong",{parentName:"p"},"event")," type operations RedisGears can do:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"RedisGears can also register event listeners that will trigger a function execution every time a watched key is changed like",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Listen for all operations on all keys and keep a list of all KeyNames in the KeySpace"),(0,n.kt)("li",{parentName:"ul"},"Listen for DEL operations on keys with a prefix ",(0,n.kt)("inlineCode",{parentName:"li"},"I-AM-IMPORTANT:"),' and asynchronously dump them in a "deleted keys" log file'),(0,n.kt)("li",{parentName:"ul"},"Listen for all HINCRBY operations on the element score of keys with a prefix ",(0,n.kt)("inlineCode",{parentName:"li"},"player:")," and synchronously update a user's level when the score reaches 1000")))))),(0,n.kt)("h3",{id:"how-can-i-try-redisgears"},"How can i try RedisGears?"),(0,n.kt)("p",null,"Run the Docker container:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"docker run -p 6379:6379 redislabs/redisgears:latest\n")),(0,n.kt)("p",null,"For a very simple example that lists all keys in your Redis database with a prefix of ",(0,n.kt)("inlineCode",{parentName:"p"},"person:")," create the following python script and name it ",(0,n.kt)("inlineCode",{parentName:"p"},"hello_gears.py")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},"gb = GearsBuilder() gb.run('person:*')\n")),(0,n.kt)("p",null,"Execute your function:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},'docker exec -i redisgears redis-cli RG.PYEXECUTE "`cat hello_gears.py`"\n')),(0,n.kt)("h3",{id:"gears-cli"},"Gears cli"),(0,n.kt)("p",null,"The gears-cli tool provides an easier way to execute RedisGears functions, specially if you need to pass some parameters too."),(0,n.kt)("p",null,"It's written in Python and can be installed with ",(0,n.kt)("inlineCode",{parentName:"p"},"pip")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"pip install gears-cli\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"gears-cli hello_gears.py REQUIREMENTS rgsync\n")),(0,n.kt)("p",null,"Usage:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sh"},"gears-cli --help\nusage: gears-cli [-h] [--host HOST] [--port PORT]\n[--requirements REQUIREMENTS] [--password PASSWORD] path [extra_args [extra_args ...]]\n")),(0,n.kt)("h3",{id:"redisgears-references"},"RedisGears references"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://oss.redis.com/redisgears/"},"RedisGears docs")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/RedisGears/rgsync"},"rgsync docs")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://docs.redis.com/latest/modules/redisgears/installing-redisgears/"},"Installing RedisGears")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://redis.com/blog/introduction-to-redisgears/"},"Introduction to RedisGears blog")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=J4clHQJScZQ&list=PL83Wfqi-zYZFvs80ncPAPHt-CEuimHl6Q&index=3"},"RedisGears GA - RedisConf 2020 video")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://www.youtube.com/watch?v=6SGWx5DtoCQ"},"Conference talk video by creator of RedisGears")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://github.com/RedisGears/rgsync/tree/master/examples/mongo"},"Redis Gears sync with MongoDB"))))}u.isMDXComponent=!0}}]);