"use strict";(self.webpackChunkredis_developer_hub=self.webpackChunkredis_developer_hub||[]).push([[8559],{85162:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(67294),s=i(86010);const r="tabItem_Ymn6";function a(e){let{children:t,hidden:i,className:a}=e;return n.createElement("div",{role:"tabpanel",className:(0,s.Z)(r,a),hidden:i},t)}},65488:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(87462),s=i(67294),r=i(86010),a=i(72389),o=i(67392),l=i(7094),d=i(12466);const m="tabList__CuJ",p="tabItem_LNqP";function c(e){var t;const{lazy:i,block:a,defaultValue:c,values:u,groupId:h,className:f}=e,g=s.Children.map(e.children,(e=>{if((0,s.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),b=u??g.map((e=>{let{props:{value:t,label:i,attributes:n}}=e;return{value:t,label:i,attributes:n}})),k=(0,o.l)(b,((e,t)=>e.value===t.value));if(k.length>0)throw new Error(`Docusaurus error: Duplicate values "${k.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const v=null===c?c:c??(null==(t=g.find((e=>e.props.default)))?void 0:t.props.value)??g[0].props.value;if(null!==v&&!b.some((e=>e.value===v)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${v}" but none of its children has the corresponding value. Available values are: ${b.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:_,setTabGroupChoices:y}=(0,l.U)(),[w,R]=(0,s.useState)(v),x=[],{blockElementScrollPositionUntilNextRender:I}=(0,d.o5)();if(null!=h){const e=_[h];null!=e&&e!==w&&b.some((t=>t.value===e))&&R(e)}const N=e=>{const t=e.currentTarget,i=x.indexOf(t),n=b[i].value;n!==w&&(I(t),R(n),null!=h&&y(h,String(n)))},S=e=>{var t;let i=null;switch(e.key){case"Enter":N(e);break;case"ArrowRight":{const t=x.indexOf(e.currentTarget)+1;i=x[t]??x[0];break}case"ArrowLeft":{const t=x.indexOf(e.currentTarget)-1;i=x[t]??x[x.length-1];break}}null==(t=i)||t.focus()};return s.createElement("div",{className:(0,r.Z)("tabs-container",m)},s.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":a},f)},b.map((e=>{let{value:t,label:i,attributes:a}=e;return s.createElement("li",(0,n.Z)({role:"tab",tabIndex:w===t?0:-1,"aria-selected":w===t,key:t,ref:e=>x.push(e),onKeyDown:S,onClick:N},a,{className:(0,r.Z)("tabs__item",p,null==a?void 0:a.className,{"tabs__item--active":w===t})}),i??t)}))),i?(0,s.cloneElement)(g.filter((e=>e.props.value===w))[0],{className:"margin-top--md"}):s.createElement("div",{className:"margin-top--md"},g.map(((e,t)=>(0,s.cloneElement)(e,{key:t,hidden:e.props.value!==w})))))}function u(e){const t=(0,a.Z)();return s.createElement(c,(0,n.Z)({key:String(t)},e))}},71131:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(67294),s=i(3905),r=i(52195);const a="riContainer_bco2",o="riDescriptionShort_E27B",l="riDetail_wzFs",d="riIcon_yDou",m="riTitle_x6vI",p="riDescription_RDnu",c="riMore_apRP";var u=i(86010);const h=e=>{const[t,i]=n.useState(!1);return n.createElement("a",{href:e.page,className:a},n.createElement("div",{className:o},n.createElement("div",{className:d},n.createElement("span",{className:"fe fe-zap"})),n.createElement("div",{className:l},n.createElement("div",{className:m},n.createElement("a",{href:e.page},e.title)),n.createElement("div",{className:p},e.description,n.Children.count(e.children)>0&&n.createElement("span",{className:(0,u.Z)(c,"fe","fe-more-horizontal"),onClick:()=>i(!t)})))),t&&n.createElement("div",{className:"ri-description-long"},n.createElement(s.Zo,{components:r.Z},e.children)))}},14087:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var n=i(87462),s=(i(67294),i(3905));i(65488),i(85162),i(44996),i(71131);const r={id:"index-profiler",title:"RedisInsight Profiler Tool - Analyze Your Redis Commands Using Redis Monitor Command",sidebar_label:"RedisInsight Profiler Tool - Analyze Your Redis Commands Using Redis Monitor Command",slug:"/explore/redisinsightv2/profiler",authors:["ajeet"]},a=void 0,o={unversionedId:"explore/redisinsightv2/profiler/index-profiler",id:"explore/redisinsightv2/profiler/index-profiler",title:"RedisInsight Profiler Tool - Analyze Your Redis Commands Using Redis Monitor Command",description:"alttext",source:"@site/docs/explore/redisinsightv2/profiler/index-profiler.mdx",sourceDirName:"explore/redisinsightv2/profiler",slug:"/explore/redisinsightv2/profiler",permalink:"/explore/redisinsightv2/profiler",draft:!1,editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/explore/redisinsightv2/profiler/index-profiler.mdx",tags:[],version:"current",lastUpdatedAt:1655485542,formattedLastUpdatedAt:"Jun 17, 2022",frontMatter:{id:"index-profiler",title:"RedisInsight Profiler Tool - Analyze Your Redis Commands Using Redis Monitor Command",sidebar_label:"RedisInsight Profiler Tool - Analyze Your Redis Commands Using Redis Monitor Command",slug:"/explore/redisinsightv2/profiler",authors:["ajeet"]},sidebar:"docs",previous:{title:"Visualize Redis Database keys using the RedisInsight Browser Tool",permalink:"/explore/redisinsightv2/browser"},next:{title:"Perform Database Search and Analytics using the RediSearch Plugin in RedisInsight v2.0",permalink:"/explore/redisinsightv2/redisearch"}},l={},d=[{value:"Step 1. Create Redis database with RedisTimeSeries module enabled",id:"step-1-create-redis-database-with-redistimeseries-module-enabled",level:3},{value:"Step 2. Create database",id:"step-2-create-database",level:3},{value:"Step 3. Download RedisInsight",id:"step-3-download-redisinsight",level:3},{value:"Step 4. Connect to Redis Enterprise Cloud Database",id:"step-4-connect-to-redis-enterprise-cloud-database",level:3},{value:"Step 5. Execute the script",id:"step-5-execute-the-script",level:3},{value:"Step 6. Running Profiler",id:"step-6-running-profiler",level:3},{value:"References:",id:"references",level:3}],m={toc:d};function p(e){let{components:t,...r}=e;return(0,s.kt)("wrapper",(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(22799).Z,width:"1354",height:"804"})),(0,s.kt)("p",null,"Last week ",(0,s.kt)("a",{parentName:"p",href:"https://docs.redis.com/latest/ri/release-notes/v2.0.2/"},"the maintenance release of RedisInsight Preview 2.0")," (v2.0.4) was introduced by the RedisInsight Team. RedisInsight v2.0 is a complete product rewrite based on a new tech stack composed of ",(0,s.kt)("a",{parentName:"p",href:"https://www.electronjs.org/"},"Electron"),", ",(0,s.kt)("a",{parentName:"p",href:"https://elastic.github.io/eui/#/"},"Elastic UI"),", ",(0,s.kt)("a",{parentName:"p",href:"https://microsoft.github.io/monaco-editor/"},"Monaco Editor"),", and ",(0,s.kt)("a",{parentName:"p",href:"https://nodejs.org/"},"Node"),".js. This newer preview build added a dedicated RedisInsight Profiler UI for the first time. The profiler uses the MONITOR command to analyze every command sent to the Redis instance in real time."),(0,s.kt)("p",null,"RedisInsight Profiler analyzes your Redis commands that are being run on the Redis server in real time. The tool provides you detailed information about the number of commands processed, commands/second, and number of connected clients. It also gives information about top prefixes, top keys, and top commands."),(0,s.kt)("p",null,"It basically runs the Redis MONITOR command and generates a summarized view. MONITOR is a debugging command that streams back every command processed by the Redis server. It can help in understanding what is happening to the database. This command can both be used via redis-cli and via telnet. All the commands sent to the Redis instance are monitored for the duration of the profiling. The ability to see all the requests processed by the server is useful in order to spot bugs in an application, both when using Redis as a database and as a distributed caching system."),(0,s.kt)("p",null,"Follow the below instructions to test drive RedisInsight Profiler tool introduced under the RedisInsight v2.0.4 release:"),(0,s.kt)("h3",{id:"step-1-create-redis-database-with-redistimeseries-module-enabled"},"Step 1. Create Redis database with RedisTimeSeries module enabled"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(50517).Z,width:"1246",height:"840"})),(0,s.kt)("p",null,"Visit ",(0,s.kt)("a",{parentName:"p",href:"https://developer.redis.com/create/rediscloud"},"https://developer.redis.com/create/rediscloud")," and create a Redis database. ",(0,s.kt)("a",{parentName:"p",href:"https://developer.redis.com/howtos/redistimeseries"},"Follow these steps to enable RedisTimeSeries module "),"on Redis Enterprise Cloud."),(0,s.kt)("h3",{id:"step-2-create-database"},"Step 2. Create database"),(0,s.kt)("p",null,"Click \u201cCreate Database\u201d. Enter database name and select RedisTimeSeries Module."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(10022).Z,width:"1252",height:"898"})),(0,s.kt)("p",null,"Once the database is created, you will see the endpoint URL that gets generated. Save it for future reference."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(38246).Z,width:"1248",height:"928"})),(0,s.kt)("h3",{id:"step-3-download-redisinsight"},"Step 3. Download RedisInsight"),(0,s.kt)("p",null,"To install RedisInsight on your local system, you need to first download the software from the Redis website.","*","*"),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://redis.com/redis-enterprise/redis-insight/#insight-form"},"Click this link "),"to access a form that allows you to select the operating system of your choice.","*","*"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(23333).Z,width:"1236",height:"1520"})),(0,s.kt)("p",null,"Execute the installer. Once it is installed on your computer, click on the RedisInsight icon to open the tool."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(73623).Z,width:"1250",height:"838"})),(0,s.kt)("h3",{id:"step-4-connect-to-redis-enterprise-cloud-database"},"Step 4. Connect to Redis Enterprise Cloud Database"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(20262).Z,width:"1254",height:"824"})),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(92628).Z,width:"1250",height:"384"})),(0,s.kt)("p",null,"As the database is empty, you won\u2019t be able to see any key."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(31072).Z,width:"1250",height:"818"})),(0,s.kt)("h3",{id:"step-5-execute-the-script"},"Step 5. Execute the script"),(0,s.kt)("p",null,"Below is the script that creates a time series representing sensor temperature measurements. After you create the time series, you can send temperature measurements. Then you can query the data for a time range on some aggregation rule."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"from redistimeseries.client import Client as RedisTimeSeries\nimport time\nimport sys\nimport site\nimport datetime\nimport random\n\nprint(' \\n '.join(sys.path))\nredis = RedisTimeSeries(host='redis-16169.c212.ap-south-1-1.ec2.cloud.redislabs.com', port=16169, password='XXXX')\n\n# redis.flushdb()\nkey = 'temperature'\ndef create(key):\n       print('\\n Create new time series: %s' % str(key))\n       #redis.create(key,retentionSecs=30,labels={'sensor_id' : 2,'area_id' : 32})\n       redis.create(key,retention_msecs=30000,labels={'sensor_id' : 2,'area_id' : 32})\n       print('')\ndef store(key, interval):\n       print(\"\\n Append new value to time series:\\n\")\n       begin_time = int(time.time())\n       for i in range(interval):\n               timestamp = int(time.time())\n               value = round(random.uniform(0.0,100.0),2)\n               timestamp_strftime = datetime.datetime.fromtimestamp(timestamp).strftime('%Y-%m-%d %H:%M:%S')\n               sys.stdout.write(' %s : %.2f \\n' % (timestamp_strftime, value))\n               sys.stdout.flush()\n               #redis.add(key,timestamp,value,retentionSecs=30, labels={'sensor_id' : 2,'area_id' : 32})\n               redis.add(key,timestamp,value,retention_msecs=30000, labels={'sensor_id' : 2,'area_id' : 32})\n               time.sleep(1)\n       end_time = int(time.time()-1)\n       return (begin_time, end_time)\ndef query(key, begin_time, end_time):\n       begin_time_datetime = datetime.datetime.fromtimestamp(begin_time).strftime('%Y-%m-%d %H:%M:%S')\n       end_time_datetime = datetime.datetime.fromtimestamp(end_time).strftime('%Y-%m-%d %H:%M:%S')\n       print(\"\\n Query time series in range:\\n\\n %s to %s \\n\" % (begin_time_datetime, end_time_datetime))\n       try:\n               #for record in redis.range(key,begin_time, end_time,bucketSizeSeconds=1):\n               for record in redis.range(key,begin_time, end_time,bucket_size_msec=1000):\n                       timestamp = datetime.datetime.fromtimestamp(record[0]).strftime('%Y-%m-%d %H:%M:%S')\n                       value = round(float(record[1]),2)\n                       print(' %s : %.2f ' % (timestamp,value))\n       except Exception as e:\n               print(\"\\n Error: %s\" % e)\n       print('')\ndef print_info():\n       print('\\n Query time series info:\\n')\n       for key in redis.keys('*'):\n               print(' key=%s' % (key.decode('utf8')))\n               info = redis.info(key)\n               sensor = info.labels['sensor_id']\n               print(\" sensor_id=%s \" % str(sensor))\n               area = info.labels['area_id']\n               print(\" area_id=%s \" % str(area))\n               last_time_stamp_seconds = info.__dict__['lastTimeStamp']\n               last_time_stamp = datetime.datetime.fromtimestamp(last_time_stamp_seconds).strftime('%Y-%m-%d %H:%M:%S')\n               print(\" last_time_stamp=%s \" % str(last_time_stamp))\n\n       print('')\n\ndef print_loop(loops):\n\n        for i in range(loops):\n\n                if i == 0:\n                        sys.stdout.write(' ')\n\n                sys.stdout.write('.')\n                sys.stdout.flush()\n                time.sleep(1)\n\n        print('')\n\ncreate(key)\ninterval = 10\nbegin_time, end_time = store(key,interval)\ntime.sleep(1)\nquery(key,begin_time,end_time)\nquery(key,begin_time+4,end_time-5)\nprint_info()\nprint('\\n Set expire key: %s' % str(key))\nredis.expire(key, (30))\nloops = 30\nprint_loop(loops)\nquery(key,begin_time,end_time)\ntime.sleep(1)\ninterval = 1\ncreate(key)\nbegin_time, end_time = store(key,interval)\ntime.sleep(1)\nquery(key,begin_time,end_time)\ntime.sleep(1)\nprint('\\n Delete key: %s' % str(key))\nredis.delete(key)\ntime.sleep(1)\n\nquery(key,begin_time,end_time)\n\nprint('')\n\n")),(0,s.kt)("p",null,"Results:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre"},"Create new time series: temperature\n\n\n Append new value to time series:\n\n 2022-02-13 17:52:16 : 36.50\n 2022-02-13 17:52:17 : 84.56\n 2022-02-13 17:52:18 : 25.90\n 2022-02-13 17:52:19 : 29.24\n 2022-02-13 17:52:20 : 35.75\n 2022-02-13 17:52:21 : 78.14\n 2022-02-13 17:52:22 : 28.77\n 2022-02-13 17:52:23 : 26.37\n 2022-02-13 17:52:24 : 74.93\n 2022-02-13 17:52:25 : 46.61\n\n Query time series in range:\n\n 2022-02-13 17:52:16 to 2022-02-13 17:52:25\n\n 2022-02-13 17:52:16 : 36.50\n 2022-02-13 17:52:17 : 84.56\n 2022-02-13 17:52:18 : 25.90\n 2022-02-13 17:52:19 : 29.24\n 2022-02-13 17:52:20 : 35.75\n 2022-02-13 17:52:21 : 78.14\n 2022-02-13 17:52:22 : 28.77\n 2022-02-13 17:52:23 : 26.37\n 2022-02-13 17:52:24 : 74.93\n 2022-02-13 17:52:25 : 46.61\n\n\n Query time series in range:\n\n 2022-02-13 17:52:20 to 2022-02-13 17:52:20\n\n 2022-02-13 17:52:20 : 35.75\n\n\n")),(0,s.kt)("h3",{id:"step-6-running-profiler"},"Step 6. Running Profiler"),(0,s.kt)("p",null,"The new RedisInsight Browser tool allows you to explore keys in your Redis server. You can add, edit, and delete a key. It also helps you to browse, filter, and visualize key-value Redis data structures."),(0,s.kt)("p",null,"Open Browser tool and select TS from the drop-down menu as shown below:"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(96993).Z,width:"1242",height:"820"})),(0,s.kt)("p",null,"It will display temperature as a key. Choose the \u201cProfiler\u201d option and click on \u201cStart Profiler.\u201d"),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(63462).Z,width:"1238",height:"830"})),(0,s.kt)("p",null,"Soon you will be able to see the detailed information about the number of commands processed, commands/second, and number of connected clients. It also gives information about top prefixes, top keys, and top commands."),(0,s.kt)("p",null,(0,s.kt)("img",{alt:"alt_text",src:i(9748).Z,width:"1248",height:"754"})),(0,s.kt)("h3",{id:"references"},"References:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://redis.com/redis-enterprise/redis-insight/"},"RedisInsight: The Best Redis GUI")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/explore/redisinsight/slowlog"},"Slowlog Configuration using RedisInsight")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/explore/redisinsight/browser"},"Explore Redis keys using RedisInsight browser tool")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/explore/redisinsight/memoryanalyzer"},"Memory Analysis using RedisInsight"))))}p.isMDXComponent=!0},22799:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_1-cba8f19d77d9433fea724f31d514bfad.png"},96993:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_10-a0add99e5f195e24beae94a05b77810a.png"},63462:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_11-cf92e57595d5c574bfef23fee33976db.png"},9748:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_12-4e34fa51e8599a0bf93fead82fa8c7a3.png"},50517:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_2-fc14bfe0db210d49b436fe2e521cc4c5.png"},10022:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_3-83facbf6b328934caa47054894963118.png"},38246:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_4-396f36639b7eed3ec101a7ac93b38253.png"},23333:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_5-3803016ae853d22691721c2d13ae7f4d.png"},73623:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_6-13ae031bfc1016d23f5be3c6e1d689c6.png"},20262:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_7-4ec48d172a2a6657a6879e89310015b6.png"},92628:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_8-4254d54bf202a245d8ce6f17617e59cb.png"},31072:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i.p+"assets/images/profiler_9-fe1ac9389ea829c56e67ba392af6339b.png"}}]);