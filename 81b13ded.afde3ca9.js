(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{210:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return a})),t.d(n,"metadata",(function(){return c})),t.d(n,"toc",(function(){return s})),t.d(n,"default",(function(){return l}));var i=t(3),o=t(7),r=(t(0),t(338)),a={id:"connecting",title:"Connecting to Redis with Redis OM Dotnet",sidebar_label:"Connecting to Redis",slug:"/develop/dotnet/redis-om-dotnet/connecting-to-redis"},c={unversionedId:"develop/dotnet/redis-om-dotnet/connecting-to-redis/connecting",id:"develop/dotnet/redis-om-dotnet/connecting-to-redis/connecting",isDocsHomePage:!1,title:"Connecting to Redis with Redis OM Dotnet",description:"Redis OM is designed to make using Redis easier for .NET developers, so naturally the first question one might ask is how would you use it to connect to Redis?",source:"@site/docs/develop/dotnet/redis-om-dotnet/connecting-to-redis/connecting-to-redis.md",slug:"/develop/dotnet/redis-om-dotnet/connecting-to-redis",permalink:"/develop/dotnet/redis-om-dotnet/connecting-to-redis",editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/develop/dotnet/redis-om-dotnet/connecting-to-redis/connecting-to-redis.md",version:"current",lastUpdatedAt:1638883599,sidebar_label:"Connecting to Redis",sidebar:"docs",previous:{title:"How to add a basic API Cache to your ASP.NET Core application",permalink:"/develop/dotnet/aspnetcore/rate-limiting/fixed-window"},next:{title:"Add and Retrieve Objects",permalink:"/develop/dotnet/redis-om-dotnet/add-and-retrieve-objects"}},s=[{value:"Initializing RedisConnectionProvider",id:"initializing-redisconnectionprovider",children:[]},{value:"Getting the RedisConnection, RedisCollection, and RedisAggregationSet",id:"getting-the-redisconnection-rediscollection-and-redisaggregationset",children:[]}],d={toc:s};function l(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(i.a)({},d,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Redis OM is designed to make using Redis easier for .NET developers, so naturally the first question one might ask is how would you use it to connect to Redis?"),Object(r.b)("p",null,"The Redis OM library is an abstraction above a lower level (closer to Redis) library\u2014",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://github.com/StackExchange/StackExchange.Redis"}),"StackExchange.Redis"),"\u2014which it uses to manage connections to Redis. That is however, an implementation detail which should not be a concern to the user. ",Object(r.b)("inlineCode",{parentName:"p"},"RedisConnectionProvider")," class contains the connection logic, and provides for connections to Redis. The RedisConnectionProvider should only be initialized once in your app's lifetime."),Object(r.b)("h2",{id:"initializing-redisconnectionprovider"},"Initializing RedisConnectionProvider"),Object(r.b)("p",null,"RedisConnectionProvider takes a ",Object(r.b)("a",Object(i.a)({parentName:"p"},{href:"https://github.com/redis-developer/Redis-Developer-URI-Spec/blob/main/spec.md"}),"Redis URI")," and uses that to initialize a connection to Redis."),Object(r.b)("p",null,"Consequentially, all that needs to be done to initialize the client is calling the constructor of ",Object(r.b)("inlineCode",{parentName:"p"},"RedisConnectionProvider")," with a Redis uri. Alternatively, you can connect with a ConnectionConfiguration object."),Object(r.b)("h4",{id:"connecting-to-a-standalone-instance-of-redis-no-auth"},"Connecting to a Standalone Instance of Redis No Auth"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-csharp"}),'var provider = new RedisConnectionProvider("redis://hostname:port");\n')),Object(r.b)("h4",{id:"connecting-to-standalone-instance-of-redis-just-password"},"Connecting to Standalone Instance of Redis Just Password"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-csharp"}),'var provider = new RedisConnectionProvider("redis://:password@hostname:port");\n')),Object(r.b)("h4",{id:"connecting-to-standalone-instance-of-redis-or-redis-enterprise-username-and-password"},"Connecting to Standalone Instance of Redis or Redis Enterprise Username and Password"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-csharp"}),'var provider = new RedisConnectionProvider("redis://username:password@hostname:port");\n')),Object(r.b)("h4",{id:"connecting-to-standalone-instance-of-redis-particular-database"},"Connecting to Standalone Instance of Redis Particular Database"),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-csharp"}),'var provider = new RedisConnectionProvider("redis://username:password@hostname:port/4");\n')),Object(r.b)("h4",{id:"connecting-to-redis-sentinel"},"Connecting to Redis Sentinel"),Object(r.b)("p",null,"When connecting to Redis Sentinel, you will need to provide the sentinel "),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-csharp"}),'var provider = new RedisConnectionProvider("redis://username:password@sentinel-hostname:port?endpoint=another-sentinel-host:port&endpoint=yet-another-sentinel-hot:port&sentinel_primary_name=redisprimary");\n')),Object(r.b)("h4",{id:"connecting-to-redis-cluster"},"Connecting to Redis Cluster"),Object(r.b)("p",null,"Connecting to a Redis Cluster is similar to connecting to a standalone server, it is advisable however to include at least one other alternative endpoint in the URI as a query parameter in case of a failover event."),Object(r.b)("pre",null,Object(r.b)("code",Object(i.a)({parentName:"pre"},{className:"language-csharp"}),'var provider = new RedisConnectionProvider("redis://username:password@hostname:port?endpoint=another-primary-host:port");\n')),Object(r.b)("h2",{id:"getting-the-redisconnection-rediscollection-and-redisaggregationset"},"Getting the RedisConnection, RedisCollection, and RedisAggregationSet"),Object(r.b)("p",null,"There are three primary drivers of Redis in this Library, which can all be accessed from the ",Object(r.b)("inlineCode",{parentName:"p"},"provider")," object after it's been initialize."),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"The RedisConnection - this provides a command level interface to Redis, a limited set of commands are directly implemented, but any command can be executed via the ",Object(r.b)("inlineCode",{parentName:"li"},"Execute")," and ",Object(r.b)("inlineCode",{parentName:"li"},"ExecuteAsync")," commands. To get a handle to the RedisConnection just use ",Object(r.b)("inlineCode",{parentName:"li"},"provider.Connection")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"RedisCollection<T>")," - This is a generic collection used to access Redis. It provides a fluent interface for retrieving data stored in Redis. To create a ",Object(r.b)("inlineCode",{parentName:"li"},"RedisCollection<T>")," use ",Object(r.b)("inlineCode",{parentName:"li"},"provider.RedisCollection<T>()")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"RedisAggregationSet<T>")," - This is another generic collection used to aggregate data in Redis. It provides a fluent interface for performing mapping & reduction operations on Redis. To create a ",Object(r.b)("inlineCode",{parentName:"li"},"RedisAggregationSet<T>"),"use ",Object(r.b)("inlineCode",{parentName:"li"},"provider.AggregationSet<T>()"))))}l.isMDXComponent=!0},338:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return m}));var i=t(0),o=t.n(i);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,i,o=function(e,n){if(null==e)return{};var t,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var d=o.a.createContext({}),l=function(e){var n=o.a.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=l(e.components);return o.a.createElement(d.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},u=o.a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,a=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=l(t),u=i,m=p["".concat(a,".").concat(u)]||p[u]||b[u]||r;return t?o.a.createElement(m,c(c({ref:n},d),{},{components:t})):o.a.createElement(m,c({ref:n},d))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,a=new Array(r);a[0]=u;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:i,a[1]=c;for(var d=2;d<r;d++)a[d]=t[d];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"}}]);