(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{300:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return c})),n.d(t,"default",(function(){return l}));var a=n(3),i=n(7),o=(n(0),n(334)),r={id:"index-usingnodejs",title:"How to cache JSON data in Redis with Node.js",sidebar_label:"RedisJSON and Node.js",slug:"/howtos/redisjson/using-nodejs",authors:["ajeet","simon"]},s={unversionedId:"howtos/redisjson/using-nodejs/index-usingnodejs",id:"howtos/redisjson/using-nodejs/index-usingnodejs",isDocsHomePage:!1,title:"How to cache JSON data in Redis with Node.js",description:"Node.js has become incredibly popular for both web and mobile application development. Node.js can be installed on MacOS, Linux and Windows systems. The Node Package Manager (npm) enables developers to install packages which are tried and tested libraries that help you to build applications quickly.",source:"@site/docs/howtos/redisjson/using-nodejs/index-usingnodejs.mdx",slug:"/howtos/redisjson/using-nodejs",permalink:"/howtos/redisjson/using-nodejs",editUrl:"https://github.com/redis-developer/redis-developer/edit/master/docs/howtos/redisjson/using-nodejs/index-usingnodejs.mdx",version:"current",lastUpdatedAt:1641539199,sidebar_label:"RedisJSON and Node.js",sidebar:"docs",previous:{title:"How to store JSON documents in Redis with Python",permalink:"/howtos/redisjson/using-python"},next:{title:"How to cache JSON data in Redis with Ruby",permalink:"/howtos/redisjson/using-ruby"}},c=[{value:"Step 1. Run the redismod Docker Container",id:"step-1-run-the-redismod-docker-container",children:[]},{value:"Step 2. Install Node.js",id:"step-2-install-nodejs",children:[]},{value:"Step 3. Initialize an npm Project",id:"step-3-initialize-an-npm-project",children:[]},{value:"Step 4. Install node-redis",id:"step-4-install-node-redis",children:[]},{value:"Step 5. Create a JavaScript File",id:"step-5-create-a-javascript-file",children:[]},{value:"Step 6. Run the Application",id:"step-6-run-the-application",children:[]},{value:"References",id:"references",children:[]}],d={toc:c};function l(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},d,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Node.js has become incredibly popular for both web and mobile application development. Node.js can be installed on MacOS, Linux and Windows systems. The Node Package Manager (npm) enables developers to install packages which are tried and tested libraries that help you to build applications quickly."),Object(o.b)("p",null,"Node.js is a fast runtime, but adding the power, speed and flexibility of Redis can take it to the next level. Redis is best suited to situations that require data to be retrieved and delivered to the client as quickly as possible."),Object(o.b)("p",null,Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://redisjson.io"}),"RedisJSON")," is an add-on module that adds JSON as a native data type to Redis. It enables atomic, in place operations to be performed on JSON documents stored in Redis."),Object(o.b)("p",null,"We'll use the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://npmjs.com/package/redis"}),"node-redis")," client to connect to Redis and leverage the power of RedisJSON."),Object(o.b)("h3",{id:"step-1-run-the-redismod-docker-container"},"Step 1. Run the redismod Docker Container"),Object(o.b)("p",null,"This simple container image bundles together the latest stable releases of Redis and select Redis modules from Redis, Inc. "),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"$ docker run -d -p 6379:6379 redislabs/redismod:latest\n")),Object(o.b)("h3",{id:"step-2-install-nodejs"},"Step 2. Install Node.js"),Object(o.b)("p",null,"Download and install the current LTS (Long Term Support) version of Node.js from the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://nodejs.org/"}),"nodejs.org")," website."),Object(o.b)("h3",{id:"step-3-initialize-an-npm-project"},"Step 3. Initialize an npm Project"),Object(o.b)("p",null,"Run ",Object(o.b)("inlineCode",{parentName:"p"},"npm init")," to initialize a new project.  Use the default answers to all the questions:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"$ mkdir jsondemo\n$ cd jsondemo\n$ npm init\n")),Object(o.b)("p",null,"Now edit ",Object(o.b)("inlineCode",{parentName:"p"},"package.json")," and add the line ",Object(o.b)("inlineCode",{parentName:"p"},'"type": "module"'),".  The file should look something like this:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "name": "jsondemo",\n  "type": "module",\n  "version": "1.0.0",\n  "description": "",\n  "main": "index.js",\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1"\n  },\n  "author": "",\n  "license": "ISC"\n}\n')),Object(o.b)("h3",{id:"step-4-install-node-redis"},"Step 4. Install node-redis"),Object(o.b)("p",null,Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://npmjs.com/package/redis"}),"node-redis")," is a high performance Node.js Redis client with support for the RedisJSON module.  Install it using ",Object(o.b)("inlineCode",{parentName:"p"},"npm"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"$ npm install redis\n")),Object(o.b)("h3",{id:"step-5-create-a-javascript-file"},"Step 5. Create a JavaScript File"),Object(o.b)("p",null,"Copy the code below into a file called ",Object(o.b)("inlineCode",{parentName:"p"},"app.js"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),"import { createClient } from 'redis';\n\nasync function redisJSONDemo () {\n  try {\n    const TEST_KEY = 'test_node';\n\n    const client = createClient();\n    await client.connect();\n\n    // RedisJSON uses JSON Path syntax. '.' is the root.\n    await client.json.set(TEST_KEY, '.', { node: 4303 });\n    const value = await client.json.get(TEST_KEY, {\n      // JSON Path: .node = the element called 'node' at root level.\n      path: '.node'\n    });\n\n    console.log(`value of node: ${value}`);\n\n    await client.quit();\n  } catch (e) {\n    console.error(e);\n  }\n}\n\nredisJSONDemo();\n")),Object(o.b)("h3",{id:"step-6-run-the-application"},"Step 6. Run the Application"),Object(o.b)("p",null,"Start the application as follows:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"$ node app.js\n")),Object(o.b)("p",null,"You should see this output:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"value of node: 4303\n")),Object(o.b)("p",null,"Using the Redis ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://redis.io/commands/monitor"}),Object(o.b)("inlineCode",{parentName:"a"},"MONITOR"))," command, you can see the Redis commands that node-redis sent to the Redis server while running the application:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),'$ redis-cli\n127.0.0.1:6379> monitor\nOK\n\n1637866932.281949 [0 127.0.0.1:61925] "JSON.SET" "test_node" "." "{\\"node\\":4303}"\n1637866932.282842 [0 127.0.0.1:61925] "JSON.GET" "test_node" ".node"\n')),Object(o.b)("h3",{id:"references"},"References"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://university.redis.com/courses/ru204/"}),"RU204: Storing, Querying and Indexing JSON at Speed")," - a course at Redis University"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/howtos/redisjson/using-python"}),"RedisJSON and Python")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/howtos/redisjson/storing-complex-json-document"}),"How to store and retrieve nested JSON documents")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/howtos/redisjson/using-nodejs"}),"Importing JSON data into Redis using Node.js")," "),Object(o.b)("li",{parentName:"ul"},"Learn more about ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://redisjson.io/"}),"RedisJSON")," in the Quickstart tutorial."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"/howtos/shoppingcart"}),"How to build a shopping cart app using Node.js and RedisJSON")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://redis.com/blog/index-and-query-json-docs-with-redis/"}),"Indexing, Querying, and Full-Text Search of JSON Documents with Redis"))))}l.isMDXComponent=!0},334:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return j}));var a=n(0),i=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var d=i.a.createContext({}),l=function(e){var t=i.a.useContext(d),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=l(e.components);return i.a.createElement(d.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},u=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,r=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),p=l(n),u=a,j=p["".concat(r,".").concat(u)]||p[u]||b[u]||o;return n?i.a.createElement(j,s(s({ref:t},d),{},{components:n})):i.a.createElement(j,s({ref:t},d))}));function j(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var d=2;d<o;d++)r[d]=n[d];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);